(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return q}});var t=n(5893),a=n(7757),s=n.n(a),o=n(2137),i=n(7294),c=n(9008),u=n(1664),l=n(7850),d=n(3457),f=n(5834),h=n(5258),p=n(8358),m=n(46),x=n(7812),j=n(9659),g=n(2318),Z=n(2764),b=n(2822),v=n(998),y=n(5517),k=n(5757),w=n(4741),C=n(9570),O=n(9009),_=n(282),N=n(5675),S=n(5639),P=n(3832),I=n(8884),A=n(7298),D=n(8995),E=n(530),R=n(2236),T=n(5877),B=n(6808),H=n.n(B),z=n(1163),F=n(7328),M=n(9669),W=n.n(M);function q(e){var r=e.title,n=e.description,a=e.children,B=(0,z.useRouter)(),M=(0,i.useContext)(R.y),q=M.state,L=M.dispatch,G=q.darkMode,K=q.cart,U=q.userInfo,X=(0,l.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:G?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),$=(0,E.Z)(),J=(0,i.useState)(!1),Q=J[0],V=J[1],Y=function(){V(!1)},ee=(0,i.useState)([]),re=ee[0],ne=ee[1],te=(0,F.Ds)().enqueueSnackbar,ae=function(){var e=(0,o.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,T.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,i.useState)(""),oe=se[0],ie=se[1];(0,i.useEffect)((function(){ae()}),[]);var ce=(0,i.useState)(null),ue=ce[0],le=ce[1],de=function(e,r){le(null),r&&B.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(d.Z,{theme:X,children:[(0,t.jsx)(f.ZP,{}),(0,t.jsx)(h.Z,{position:"static",className:$.navbar,children:(0,t.jsxs)(p.Z,{className:$.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){V(!0)},className:$.menuButton,children:(0,t.jsx)(I.Z,{className:$.navbarButton})}),(0,t.jsx)(u.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:$.brand,children:"amazona"})})})]}),(0,t.jsx)(Z.ZP,{anchor:"left",open:Q,onClose:Y,children:(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(A.Z,{})})]})}),(0,t.jsx)(y.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(u.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(v.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(k.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:$.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B.push("/search?query=".concat(oe))},className:$.searchForm,children:[(0,t.jsx)(w.Z,{name:"query",className:$.searchInput,placeholder:"Search products",onChange:function(e){ie(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:$.iconButton,"aria-label":"search",children:(0,t.jsx)(D.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Z,{checked:G,onChange:function(){L({type:G?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!G;H().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(u.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:K.cartItems.length>0?(0,t.jsx)(O.Z,{color:"secondary",badgeContent:K.cartItems.length,children:"Cart"}):"Cart"})})}),U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){le(e.currentTarget)},className:$.navbarButton,children:U.name}),(0,t.jsxs)(N.Z,{id:"simple-menu",anchorEl:ue,keepMounted:!0,open:Boolean(ue),onClose:de,children:[(0,t.jsx)(S.Z,{onClick:function(e){return de(0,"/profile")},children:"Profile"}),(0,t.jsx)(S.Z,{onClick:function(e){return de(0,"/order-history")},children:"Order Hisotry"}),U.isAdmin&&(0,t.jsx)(S.Z,{onClick:function(e){return de(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(S.Z,{onClick:function(){le(null),L({type:"USER_LOGOUT"}),H().remove("userInfo"),H().remove("cartItems"),H().remove("shippinhAddress"),H().remove("paymentMethod"),B.push("/")},children:"Logout"})]})]}):(0,t.jsx)(u.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(P.Z,{className:$.main,children:a}),(0,t.jsx)("footer",{className:$.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},4486:function(e,r,n){"use strict";n.d(r,{Z:function(){return h}});var t=n(5893),a=n(8463),s=n(9738),o=n(951),i=n(9912),c=n(2318),u=n(1907),l=n(282),d=(n(7294),n(1664)),f=n(628);function h(e){var r=e.product,n=e.addToCartHandler;return(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(d.default,{href:"/product/".concat(r.slug),passHref:!0,children:(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(o.Z,{component:"img",image:r.image,title:r.name}),(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(c.Z,{children:r.name}),(0,t.jsx)(f.Z,{value:r.rating,readOnly:!0})]})]})}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(c.Z,{children:["$",r.price]}),(0,t.jsx)(l.Z,{size:"small",color:"primary",onClick:function(){return n(r)},children:"Add to cart"})]})]})}},6124:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return k},default:function(){return w}});var t=n(5893),a=n(7757),s=n.n(a),o=n(6156),i=n(2137),c=n(1664),u=n(9659),l=n(2318),d=n(1749),f=n(4941),h=n(9669),p=n.n(h),m=n(1163),x=n(7294),j=n(2236),g=n(4486),Z=n(3056),b=n(530);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var k=!0;function w(e){var r=(0,b.Z)(),n=(0,m.useRouter)(),a=(0,x.useContext)(j.y),o=a.state,h=a.dispatch,v=e.topRatedProducts,k=e.featuredProducts,w=function(){var e=(0,i.Z)(s().mark((function e(r){var t,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.cart.cartItems.find((function(e){return e._id===r._id})),a=t?t.quantity+1:1,e.next=4,p().get("/api/products/".concat(r._id));case 4:if(i=e.sent,!(i.data.countInStock<a)){e.next=9;break}return window.alert("Sorry. Product is out of stock"),e.abrupt("return");case 9:h({type:"CART_ADD_ITEM",payload:y(y({},r),{},{quantity:a})}),n.push("/cart");case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(Z.Z,{className:r.mt1,animation:"slide",children:k.map((function(e){return(0,t.jsx)(c.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,t.jsx)(u.Z,{children:(0,t.jsx)("img",{src:e.featuredImage,alt:e.name,className:r.featuredImage})})},e._id)}))}),(0,t.jsx)(l.Z,{variant:"h2",children:"Popular Products"}),(0,t.jsx)(d.Z,{container:!0,spacing:3,children:v.map((function(e){return(0,t.jsx)(d.Z,{item:!0,md:4,children:(0,t.jsx)(g.Z,{product:e,addToCartHandler:w})},e.name)}))})]})}},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},8581:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6124)}])}},function(e){e.O(0,[961,453,537,207,916,774,888,179],(function(){return r=8581,e(e.s=r);var r}));var r=e.O();_N_E=r}]);