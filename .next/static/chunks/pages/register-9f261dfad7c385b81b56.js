(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return H}});var t=n(5893),a=n(7757),s=n.n(a),i=n(2137),o=n(7294),c=n(9008),l=n(1664),d=n(7850),u=n(3457),f=n(5834),h=n(5258),p=n(8358),m=n(46),x=n(7812),j=n(9659),g=n(2318),b=n(2764),Z=n(2822),v=n(998),y=n(5517),w=n(5757),k=n(4741),P=n(9570),C=n(9009),O=n(282),N=n(5675),S=n(5639),_=n(3832),E=n(8884),B=n(7298),I=n(8995),R=n(530),q=n(2236),L=n(5877),A=n(6808),D=n.n(A),T=n(1163),W=n(7328),z=n(9669),F=n.n(z);function H(e){var r=e.title,n=e.description,a=e.children,A=(0,T.useRouter)(),z=(0,o.useContext)(q.y),H=z.state,M=z.dispatch,Q=H.darkMode,V=H.cart,G=H.userInfo,U=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:Q?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),K=(0,R.Z)(),X=(0,o.useState)(!1),$=X[0],J=X[1],Y=function(){J(!1)},ee=(0,o.useState)([]),re=ee[0],ne=ee[1],te=(0,W.Ds)().enqueueSnackbar,ae=function(){var e=(0,i.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,L.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,o.useState)(""),ie=se[0],oe=se[1];(0,o.useEffect)((function(){ae()}),[]);var ce=(0,o.useState)(null),le=ce[0],de=ce[1],ue=function(e,r){de(null),r&&A.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(u.Z,{theme:U,children:[(0,t.jsx)(f.ZP,{}),(0,t.jsx)(h.Z,{position:"static",className:K.navbar,children:(0,t.jsxs)(p.Z,{className:K.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){J(!0)},className:K.menuButton,children:(0,t.jsx)(E.Z,{className:K.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:K.brand,children:"amazona"})})})]}),(0,t.jsx)(b.ZP,{anchor:"left",open:$,onClose:Y,children:(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(B.Z,{})})]})}),(0,t.jsx)(y.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(v.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(w.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:K.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),A.push("/search?query=".concat(ie))},className:K.searchForm,children:[(0,t.jsx)(k.Z,{name:"query",className:K.searchInput,placeholder:"Search products",onChange:function(e){oe(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:K.iconButton,"aria-label":"search",children:(0,t.jsx)(I.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(P.Z,{checked:Q,onChange:function(){M({type:Q?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!Q;D().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:V.cartItems.length>0?(0,t.jsx)(C.Z,{color:"secondary",badgeContent:V.cartItems.length,children:"Cart"}):"Cart"})})}),G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:K.navbarButton,children:G.name}),(0,t.jsxs)(N.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:ue,children:[(0,t.jsx)(S.Z,{onClick:function(e){return ue(0,"/profile")},children:"Profile"}),(0,t.jsx)(S.Z,{onClick:function(e){return ue(0,"/order-history")},children:"Order Hisotry"}),G.isAdmin&&(0,t.jsx)(S.Z,{onClick:function(e){return ue(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(S.Z,{onClick:function(){de(null),M({type:"USER_LOGOUT"}),D().remove("userInfo"),D().remove("cartItems"),D().remove("shippinhAddress"),D().remove("paymentMethod"),A.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(_.Z,{className:K.main,children:a}),(0,t.jsx)("footer",{className:K.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},9249:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return S}});var t=n(5893),a=n(6156),s=n(7757),i=n.n(s),o=n(2137),c=n(2318),l=n(2822),d=n(998),u=n(7784),f=n(282),h=n(9659),p=n(9669),m=n.n(p),x=n(1163),j=n(1664),g=n(7294),b=n(4941),Z=n(2236),v=n(530),y=n(6808),w=n.n(y),k=n(2283),P=n(7328),C=n(5877);function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function N(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){(0,a.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function S(){var e=(0,k.cI)(),r=e.handleSubmit,n=e.control,a=e.formState.errors,s=(0,P.Ds)(),p=s.enqueueSnackbar,y=s.closeSnackbar,O=(0,x.useRouter)(),S=O.query.redirect,_=(0,g.useContext)(Z.y),E=_.state,B=_.dispatch,I=E.userInfo;(0,g.useEffect)((function(){I&&O.push("/")}),[]);var R=(0,v.Z)(),q=function(){var e=(0,o.Z)(i().mark((function e(r){var n,t,a,s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.name,t=r.email,a=r.password,s=r.confirmPassword,y(),a===s){e.next=5;break}return p("Passwords don't match",{variant:"error"}),e.abrupt("return");case 5:return e.prev=5,e.next=8,m().post("/api/users/register",{name:n,email:t,password:a});case 8:o=e.sent,c=o.data,B({type:"USER_LOGIN",payload:c}),w().set("userInfo",c),O.push(S||"/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),p((0,C.b)(e.t0),{variant:"error"});case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsx)(b.Z,{title:"Register",children:(0,t.jsxs)("form",{onSubmit:r(q),className:R.form,children:[(0,t.jsx)(c.Z,{component:"h1",variant:"h1",children:"Register"}),(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(d.Z,{children:(0,t.jsx)(k.Qr,{name:"name",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,t.jsx)(u.Z,N({variant:"outlined",fullWidth:!0,id:"name",label:"Name",inputProps:{type:"name"},error:Boolean(a.name),helperText:a.name?"minLength"===a.name.type?"Name length is more than 1":"Name is required":""},r))}})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(k.Qr,{name:"email",control:n,defaultValue:"",rules:{required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/},render:function(e){var r=e.field;return(0,t.jsx)(u.Z,N({variant:"outlined",fullWidth:!0,id:"email",label:"Email",inputProps:{type:"email"},error:Boolean(a.email),helperText:a.email?"pattern"===a.email.type?"Email is not valid":"Email is required":""},r))}})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(k.Qr,{name:"password",control:n,defaultValue:"",rules:{required:!0,minLength:6},render:function(e){var r=e.field;return(0,t.jsx)(u.Z,N({variant:"outlined",fullWidth:!0,id:"password",label:"Password",inputProps:{type:"password"},error:Boolean(a.password),helperText:a.password?"minLength"===a.password.type?"Password length is more than 5":"Password is required":""},r))}})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(k.Qr,{name:"confirmPassword",control:n,defaultValue:"",rules:{required:!0,minLength:6},render:function(e){var r=e.field;return(0,t.jsx)(u.Z,N({variant:"outlined",fullWidth:!0,id:"confirmPassword",label:"Confirm Password",inputProps:{type:"password"},error:Boolean(a.confirmPassword),helperText:a.confirmPassword?"minLength"===a.confirmPassword.type?"Confirm Password length is more than 5":"Confirm  Password is required":""},r))}})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(f.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Register"})}),(0,t.jsxs)(d.Z,{children:["Already have an account? \xa0",(0,t.jsx)(j.default,{href:"/login?redirect=".concat(S||"/"),passHref:!0,children:(0,t.jsx)(h.Z,{children:"Login"})})]})]})]})})}},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},8740:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return n(9249)}])}},function(e){e.O(0,[961,453,537,174,784,283,774,888,179],(function(){return r=8740,e(e.s=r);var r}));var r=e.O();_N_E=r}]);