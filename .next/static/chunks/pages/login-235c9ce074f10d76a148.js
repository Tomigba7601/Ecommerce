(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return H}});var t=n(5893),a=n(7757),s=n.n(a),o=n(2137),i=n(7294),c=n(9008),l=n(1664),u=n(7850),d=n(3457),h=n(5834),f=n(5258),p=n(8358),m=n(46),x=n(7812),j=n(9659),g=n(2318),b=n(2764),Z=n(2822),v=n(998),y=n(5517),w=n(5757),k=n(4741),O=n(9570),C=n(9009),N=n(282),S=n(5675),_=n(5639),P=n(3832),E=n(8884),I=n(7298),B=n(8995),D=n(530),R=n(2236),A=n(5877),L=n(6808),z=n.n(L),T=n(1163),q=n(7328),W=n(9669),F=n.n(W);function H(e){var r=e.title,n=e.description,a=e.children,L=(0,T.useRouter)(),W=(0,i.useContext)(R.y),H=W.state,M=W.dispatch,G=H.darkMode,U=H.cart,K=H.userInfo,Q=(0,u.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:G?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),V=(0,D.Z)(),X=(0,i.useState)(!1),$=X[0],J=X[1],Y=function(){J(!1)},ee=(0,i.useState)([]),re=ee[0],ne=ee[1],te=(0,q.Ds)().enqueueSnackbar,ae=function(){var e=(0,o.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,A.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,i.useState)(""),oe=se[0],ie=se[1];(0,i.useEffect)((function(){ae()}),[]);var ce=(0,i.useState)(null),le=ce[0],ue=ce[1],de=function(e,r){ue(null),r&&L.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(d.Z,{theme:Q,children:[(0,t.jsx)(h.ZP,{}),(0,t.jsx)(f.Z,{position:"static",className:V.navbar,children:(0,t.jsxs)(p.Z,{className:V.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){J(!0)},className:V.menuButton,children:(0,t.jsx)(E.Z,{className:V.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:V.brand,children:"amazona"})})})]}),(0,t.jsx)(b.ZP,{anchor:"left",open:$,onClose:Y,children:(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(I.Z,{})})]})}),(0,t.jsx)(y.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(v.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(w.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:V.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L.push("/search?query=".concat(oe))},className:V.searchForm,children:[(0,t.jsx)(k.Z,{name:"query",className:V.searchInput,placeholder:"Search products",onChange:function(e){ie(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:V.iconButton,"aria-label":"search",children:(0,t.jsx)(B.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(O.Z,{checked:G,onChange:function(){M({type:G?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!G;z().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:U.cartItems.length>0?(0,t.jsx)(C.Z,{color:"secondary",badgeContent:U.cartItems.length,children:"Cart"}):"Cart"})})}),K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){ue(e.currentTarget)},className:V.navbarButton,children:K.name}),(0,t.jsxs)(S.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:de,children:[(0,t.jsx)(_.Z,{onClick:function(e){return de(0,"/profile")},children:"Profile"}),(0,t.jsx)(_.Z,{onClick:function(e){return de(0,"/order-history")},children:"Order Hisotry"}),K.isAdmin&&(0,t.jsx)(_.Z,{onClick:function(e){return de(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(_.Z,{onClick:function(){ue(null),M({type:"USER_LOGOUT"}),z().remove("userInfo"),z().remove("cartItems"),z().remove("shippinhAddress"),z().remove("paymentMethod"),L.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(P.Z,{className:V.main,children:a}),(0,t.jsx)("footer",{className:V.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},1162:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return _}});var t=n(5893),a=n(6156),s=n(7757),o=n.n(s),i=n(2137),c=n(2318),l=n(2822),u=n(998),d=n(7784),h=n(282),f=n(9659),p=n(9669),m=n.n(p),x=n(1163),j=n(1664),g=n(7294),b=n(4941),Z=n(2236),v=n(530),y=n(6808),w=n.n(y),k=n(2283),O=n(7328),C=n(5877);function N(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function S(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N(Object(n),!0).forEach((function(r){(0,a.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function _(){var e=(0,k.cI)(),r=e.handleSubmit,n=e.control,a=e.formState.errors,s=(0,O.Ds)(),p=s.enqueueSnackbar,y=s.closeSnackbar,N=(0,x.useRouter)(),_=N.query.redirect,P=(0,g.useContext)(Z.y),E=P.state,I=P.dispatch,B=E.userInfo;(0,g.useEffect)((function(){B&&N.push("/")}),[]);var D=(0,v.Z)(),R=function(){var e=(0,i.Z)(o().mark((function e(r){var n,t,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.email,t=r.password,y(),e.prev=2,e.next=5,m().post("/api/users/login",{email:n,password:t});case 5:a=e.sent,s=a.data,I({type:"USER_LOGIN",payload:s}),w().set("userInfo",s),N.push(_||"/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),p((0,C.b)(e.t0),{variant:"error"});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsx)(b.Z,{title:"Login",children:(0,t.jsxs)("form",{onSubmit:r(R),className:D.form,children:[(0,t.jsx)(c.Z,{component:"h1",variant:"h1",children:"Login"}),(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(u.Z,{children:(0,t.jsx)(k.Qr,{name:"email",control:n,defaultValue:"",rules:{required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/},render:function(e){var r=e.field;return(0,t.jsx)(d.Z,S({variant:"outlined",fullWidth:!0,id:"email",label:"Email",inputProps:{type:"email"},error:Boolean(a.email),helperText:a.email?"pattern"===a.email.type?"Email is not valid":"Email is required":""},r))}})}),(0,t.jsx)(u.Z,{children:(0,t.jsx)(k.Qr,{name:"password",control:n,defaultValue:"",rules:{required:!0,minLength:6},render:function(e){var r=e.field;return(0,t.jsx)(d.Z,S({variant:"outlined",fullWidth:!0,id:"password",label:"Password",inputProps:{type:"password"},error:Boolean(a.password),helperText:a.password?"minLength"===a.password.type?"Password length is more than 5":"Password is required":""},r))}})}),(0,t.jsx)(u.Z,{children:(0,t.jsx)(h.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Login"})}),(0,t.jsxs)(u.Z,{children:["Don't have an account? \xa0",(0,t.jsx)(j.default,{href:"/register?redirect=".concat(_||"/"),passHref:!0,children:(0,t.jsx)(f.Z,{children:"Register"})})]})]})]})})}},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},7156:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(1162)}])}},function(e){e.O(0,[961,453,537,174,784,283,774,888,179],(function(){return r=7156,e(e.s=r);var r}));var r=e.O();_N_E=r}]);