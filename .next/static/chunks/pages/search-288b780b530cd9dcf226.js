(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{4941:function(e,n,r){"use strict";r.d(n,{Z:function(){return L}});var t=r(5893),a=r(7757),s=r.n(a),i=r(2137),c=r(7294),l=r(9008),o=r(1664),u=r(7850),d=r(3457),h=r(5834),f=r(5258),p=r(8358),m=r(46),x=r(7812),j=r(9659),g=r(2318),Z=r(2764),v=r(2822),b=r(998),y=r(5517),C=r(5757),w=r(4741),k=r(9570),N=r(9009),O=r(282),_=r(5675),S=r(5639),P=r(3832),A=r(8884),I=r(7298),R=r(8995),W=r(530),D=r(2236),E=r(5877),B=r(6808),T=r.n(B),H=r(1163),q=r(7328),F=r(9669),z=r.n(F);function L(e){var n=e.title,r=e.description,a=e.children,B=(0,H.useRouter)(),F=(0,c.useContext)(D.y),L=F.state,M=F.dispatch,$=L.darkMode,U=L.cart,G=L.userInfo,K=(0,u.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:$?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),Q=(0,W.Z)(),X=(0,c.useState)(!1),J=X[0],V=X[1],Y=function(){V(!1)},ee=(0,c.useState)([]),ne=ee[0],re=ee[1],te=(0,q.Ds)().enqueueSnackbar,ae=function(){var e=(0,i.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z().get("/api/products/categories");case 3:n=e.sent,r=n.data,re(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,E.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,c.useState)(""),ie=se[0],ce=se[1];(0,c.useEffect)((function(){ae()}),[]);var le=(0,c.useState)(null),oe=le[0],ue=le[1],de=function(e,n){ue(null),n&&B.push(n)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.default,{children:[(0,t.jsx)("title",{children:n?"".concat(n," - Next Amazona"):"Next Amazona"}),r&&(0,t.jsx)("meta",{name:"description",content:r})]}),(0,t.jsxs)(d.Z,{theme:K,children:[(0,t.jsx)(h.ZP,{}),(0,t.jsx)(f.Z,{position:"static",className:Q.navbar,children:(0,t.jsxs)(p.Z,{className:Q.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){V(!0)},className:Q.menuButton,children:(0,t.jsx)(A.Z,{className:Q.navbarButton})}),(0,t.jsx)(o.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:Q.brand,children:"amazona"})})})]}),(0,t.jsx)(Z.ZP,{anchor:"left",open:J,onClose:Y,children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(b.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(I.Z,{})})]})}),(0,t.jsx)(y.Z,{light:!0}),ne.map((function(e){return(0,t.jsx)(o.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(b.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(C.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:Q.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B.push("/search?query=".concat(ie))},className:Q.searchForm,children:[(0,t.jsx)(w.Z,{name:"query",className:Q.searchInput,placeholder:"Search products",onChange:function(e){ce(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:Q.iconButton,"aria-label":"search",children:(0,t.jsx)(R.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Z,{checked:$,onChange:function(){M({type:$?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!$;T().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(o.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:U.cartItems.length>0?(0,t.jsx)(N.Z,{color:"secondary",badgeContent:U.cartItems.length,children:"Cart"}):"Cart"})})}),G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){ue(e.currentTarget)},className:Q.navbarButton,children:G.name}),(0,t.jsxs)(_.Z,{id:"simple-menu",anchorEl:oe,keepMounted:!0,open:Boolean(oe),onClose:de,children:[(0,t.jsx)(S.Z,{onClick:function(e){return de(0,"/profile")},children:"Profile"}),(0,t.jsx)(S.Z,{onClick:function(e){return de(0,"/order-history")},children:"Order Hisotry"}),G.isAdmin&&(0,t.jsx)(S.Z,{onClick:function(e){return de(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(S.Z,{onClick:function(){ue(null),M({type:"USER_LOGOUT"}),T().remove("userInfo"),T().remove("cartItems"),T().remove("shippinhAddress"),T().remove("paymentMethod"),B.push("/")},children:"Logout"})]})]}):(0,t.jsx)(o.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(P.Z,{className:Q.main,children:a}),(0,t.jsx)("footer",{className:Q.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},4486:function(e,n,r){"use strict";r.d(n,{Z:function(){return f}});var t=r(5893),a=r(8463),s=r(9738),i=r(951),c=r(9912),l=r(2318),o=r(1907),u=r(282),d=(r(7294),r(1664)),h=r(628);function f(e){var n=e.product,r=e.addToCartHandler;return(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(d.default,{href:"/product/".concat(n.slug),passHref:!0,children:(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(i.Z,{component:"img",image:n.image,title:n.name}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(l.Z,{children:n.name}),(0,t.jsx)(h.Z,{value:n.rating,readOnly:!0})]})]})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsxs)(l.Z,{children:["$",n.price]}),(0,t.jsx)(u.Z,{size:"small",color:"primary",onClick:function(){return r(n)},children:"Add to cart"})]})]})}},1971:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return A},default:function(){return I}});var t=r(5893),a=r(7757),s=r.n(a),i=r(6156),c=r(2137),l=r(1749),o=r(2822),u=r(998),d=r(46),h=r(2318),f=r(6209),p=r(5639),m=r(282),x=r(7298),j=r(1163),g=r(7294),Z=r(4941),v=r(530),b=r(4486),y=r(2236),C=r(9669),w=r.n(C),k=r(628),N=r(3031);function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function _(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var S=[{name:"$1 to $50",value:"1-50"},{name:"$51 to $200",value:"51-200"},{name:"$201 to $1000",value:"201-1000"}],P=[1,2,3,4,5],A=!0;function I(e){var n=(0,v.Z)(),r=(0,j.useRouter)(),a=r.query,i=a.query,C=void 0===i?"all":i,O=a.category,A=void 0===O?"all":O,I=a.brand,R=void 0===I?"all":I,W=a.price,D=void 0===W?"all":W,E=a.rating,B=void 0===E?"all":E,T=a.sort,H=void 0===T?"featured":T,q=e.products,F=e.countProducts,z=e.categories,L=e.brands,M=e.pages,$=function(e){var n=e.page,t=e.category,a=e.brand,s=e.sort,i=e.min,c=e.max,l=e.searchQuery,o=e.price,u=e.rating,d=r.pathname,h=r.query;n&&(h.page=n),l&&(h.searchQuery=l),s&&(h.sort=s),t&&(h.category=t),a&&(h.brand=a),o&&(h.price=o),u&&(h.rating=u),i&&(h.min,h.min),c&&(h.max,h.max),r.push({pathname:d,query:h})},U=(0,g.useContext)(y.y),G=U.state,K=U.dispatch,Q=function(){var e=(0,c.Z)(s().mark((function e(n){var t,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.cart.cartItems.find((function(e){return e._id===n._id})),a=t?t.quantity+1:1,e.next=4,w().get("/api/products/".concat(n._id));case 4:if(i=e.sent,!(i.data.countInStock<a)){e.next=9;break}return window.alert("Sorry. Product is out of stock"),e.abrupt("return");case 9:K({type:"CART_ADD_ITEM",payload:_(_({},n),{},{quantity:a})}),r.push("/cart");case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,t.jsx)(Z.Z,{title:"Search",children:(0,t.jsxs)(l.Z,{className:n.mt1,container:!0,spacing:1,children:[(0,t.jsx)(l.Z,{item:!0,md:3,children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(u.Z,{children:(0,t.jsxs)(d.Z,{className:n.fullWidth,children:[(0,t.jsx)(h.Z,{children:"Categories"}),(0,t.jsxs)(f.Z,{fullWidth:!0,value:A,onChange:function(e){$({category:e.target.value})},children:[(0,t.jsx)(p.Z,{value:"all",children:"All"}),z&&z.map((function(e){return(0,t.jsx)(p.Z,{value:e,children:e},e)}))]})]})}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(d.Z,{className:n.fullWidth,children:[(0,t.jsx)(h.Z,{children:"Brands"}),(0,t.jsxs)(f.Z,{value:R,onChange:function(e){$({brand:e.target.value})},fullWidth:!0,children:[(0,t.jsx)(p.Z,{value:"all",children:"All"}),L&&L.map((function(e){return(0,t.jsx)(p.Z,{value:e,children:e},e)}))]})]})}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(d.Z,{className:n.fullWidth,children:[(0,t.jsx)(h.Z,{children:"Prices"}),(0,t.jsxs)(f.Z,{value:D,onChange:function(e){$({price:e.target.value})},fullWidth:!0,children:[(0,t.jsx)(p.Z,{value:"all",children:"All"}),S.map((function(e){return(0,t.jsx)(p.Z,{value:e.value,children:e.name},e.value)}))]})]})}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(d.Z,{className:n.fullWidth,children:[(0,t.jsx)(h.Z,{children:"Ratings"}),(0,t.jsxs)(f.Z,{value:B,onChange:function(e){$({rating:e.target.value})},fullWidth:!0,children:[(0,t.jsx)(p.Z,{value:"all",children:"All"}),P.map((function(e){return(0,t.jsxs)(p.Z,{dispaly:"flex",value:e,children:[(0,t.jsx)(k.Z,{value:e,readOnly:!0}),(0,t.jsx)(h.Z,{component:"span",children:"& Up"})]},e)}))]})]})})]})}),(0,t.jsxs)(l.Z,{item:!0,md:9,children:[(0,t.jsxs)(l.Z,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(l.Z,{item:!0,children:[0===q.length?"No":F," Results","all"!==C&&""!==C&&" : "+C,"all"!==A&&" : "+A,"all"!==R&&" : "+R,"all"!==D&&" : Price "+D,"all"!==B&&" : Rating "+B+" & up","all"!==C&&""!==C||"all"!==A||"all"!==R||"all"!==B||"all"!==D?(0,t.jsx)(m.Z,{onClick:function(){return r.push("/search")},children:(0,t.jsx)(x.Z,{})}):null]}),(0,t.jsxs)(l.Z,{item:!0,children:[(0,t.jsx)(h.Z,{component:"span",className:n.sort,children:"Sort by"}),(0,t.jsxs)(f.Z,{value:H,onChange:function(e){$({sort:e.target.value})},children:[(0,t.jsx)(p.Z,{value:"featured",children:"Featured"}),(0,t.jsx)(p.Z,{value:"lowest",children:"Price: Low to High"}),(0,t.jsx)(p.Z,{value:"highest",children:"Price: High to Low"}),(0,t.jsx)(p.Z,{value:"toprated",children:"Customer Reviews"}),(0,t.jsx)(p.Z,{value:"newest",children:"Newest Arrivals"})]})]})]}),(0,t.jsx)(l.Z,{className:n.mt1,container:!0,spacing:3,children:q.map((function(e){return(0,t.jsx)(l.Z,{item:!0,md:4,children:(0,t.jsx)(b.Z,{product:e,addToCartHandler:Q})},e.name)}))}),(0,t.jsx)(N.Z,{className:n.mt1,defaultPage:parseInt(C.page||"1"),count:M,onChange:function(e,n){$({page:n})}})]})]})})}},5877:function(e,n,r){"use strict";r.d(n,{b:function(){return t}});r(7757),r(2137),r(6785),r(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,n,r){"use strict";var t=r(6156),a=(0,r(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));n.Z=a},8161:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(1971)}])}},function(e){e.O(0,[961,453,537,174,207,988,774,888,179],(function(){return n=8161,e(e.s=n);var n}));var n=e.O();_N_E=n}]);