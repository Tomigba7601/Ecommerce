(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{5477:function(e,r,n){"use strict";var t=n(2122),i=n(1253),s=n(7294),a=(n(5697),n(6010)),c=n(4670),o=n(3871),l=44,d=s.forwardRef((function(e,r){var n=e.classes,c=e.className,d=e.color,h=void 0===d?"primary":d,u=e.disableShrink,x=void 0!==u&&u,m=e.size,f=void 0===m?40:m,p=e.style,j=e.thickness,Z=void 0===j?3.6:j,g=e.value,v=void 0===g?0:g,y=e.variant,k=void 0===y?"indeterminate":y,b=(0,i.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),N={},C={},S={};if("determinate"===k||"static"===k){var w=2*Math.PI*((l-Z)/2);N.strokeDasharray=w.toFixed(3),S["aria-valuenow"]=Math.round(v),N.strokeDashoffset="".concat(((100-v)/100*w).toFixed(3),"px"),C.transform="rotate(-90deg)"}return s.createElement("div",(0,t.Z)({className:(0,a.Z)(n.root,c,"inherit"!==h&&n["color".concat((0,o.Z)(h))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[k]),style:(0,t.Z)({width:f,height:f},C,p),ref:r,role:"progressbar"},S,b),s.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},s.createElement("circle",{className:(0,a.Z)(n.circle,x&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[k]),style:N,cx:l,cy:l,r:(l-Z)/2,fill:"none",strokeWidth:Z})))}));r.Z=(0,c.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},5409:function(e,r,n){"use strict";n.d(r,{Z:function(){return o}});var t=n(5893),i=n(7661),s=n(1594),a=n(7257),c=(n(7294),n(530));function o(e){var r=e.activeStep,n=void 0===r?0:r,o=(0,c.Z)();return(0,t.jsx)(i.Z,{className:o.transparentBackgroud,activeStep:n,alternativeLabel:!0,children:["Login","Shipping Address","Payment Method","Place Order"].map((function(e){return(0,t.jsx)(s.Z,{children:(0,t.jsx)(a.Z,{children:e})},e)}))})}},4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return W}});var t=n(5893),i=n(7757),s=n.n(i),a=n(2137),c=n(7294),o=n(9008),l=n(1664),d=n(7850),h=n(3457),u=n(5834),x=n(5258),m=n(8358),f=n(46),p=n(7812),j=n(9659),Z=n(2318),g=n(2764),v=n(2822),y=n(998),k=n(5517),b=n(5757),N=n(4741),C=n(9570),S=n(9009),w=n(282),D=n(5675),I=n(5639),P=n(3832),_=n(8884),O=n(7298),A=n(8995),E=n(530),B=n(2236),M=n(5877),R=n(6808),T=n.n(R),z=n(1163),F=n(7328),L=n(9669),H=n.n(L);function W(e){var r=e.title,n=e.description,i=e.children,R=(0,z.useRouter)(),L=(0,c.useContext)(B.y),W=L.state,$=L.dispatch,q=W.darkMode,G=W.cart,K=W.userInfo,U=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:q?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),X=(0,E.Z)(),Q=(0,c.useState)(!1),J=Q[0],V=Q[1],Y=function(){V(!1)},ee=(0,c.useState)([]),re=ee[0],ne=ee[1],te=(0,F.Ds)().enqueueSnackbar,ie=function(){var e=(0,a.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,M.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,c.useState)(""),ae=se[0],ce=se[1];(0,c.useEffect)((function(){ie()}),[]);var oe=(0,c.useState)(null),le=oe[0],de=oe[1],he=function(e,r){de(null),r&&R.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(h.Z,{theme:U,children:[(0,t.jsx)(u.ZP,{}),(0,t.jsx)(x.Z,{position:"static",className:X.navbar,children:(0,t.jsxs)(m.Z,{className:X.toolbar,children:[(0,t.jsxs)(f.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(p.Z,{edge:"start","aria-label":"open drawer",onClick:function(){V(!0)},className:X.menuButton,children:(0,t.jsx)(_.Z,{className:X.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{className:X.brand,children:"amazona"})})})]}),(0,t.jsx)(g.ZP,{anchor:"left",open:J,onClose:Y,children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(y.Z,{children:(0,t.jsxs)(f.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(Z.Z,{children:"Shopping by category"}),(0,t.jsx)(p.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(O.Z,{})})]})}),(0,t.jsx)(k.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(y.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(b.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:X.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),R.push("/search?query=".concat(ae))},className:X.searchForm,children:[(0,t.jsx)(N.Z,{name:"query",className:X.searchInput,placeholder:"Search products",onChange:function(e){ce(e.target.value)}}),(0,t.jsx)(p.Z,{type:"submit",className:X.iconButton,"aria-label":"search",children:(0,t.jsx)(A.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.Z,{checked:q,onChange:function(){$({type:q?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!q;T().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{component:"span",children:G.cartItems.length>0?(0,t.jsx)(S.Z,{color:"secondary",badgeContent:G.cartItems.length,children:"Cart"}):"Cart"})})}),K?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:X.navbarButton,children:K.name}),(0,t.jsxs)(D.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:he,children:[(0,t.jsx)(I.Z,{onClick:function(e){return he(0,"/profile")},children:"Profile"}),(0,t.jsx)(I.Z,{onClick:function(e){return he(0,"/order-history")},children:"Order Hisotry"}),K.isAdmin&&(0,t.jsx)(I.Z,{onClick:function(e){return he(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(I.Z,{onClick:function(){de(null),$({type:"USER_LOGOUT"}),T().remove("userInfo"),T().remove("cartItems"),T().remove("shippinhAddress"),T().remove("paymentMethod"),R.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(P.Z,{className:X.main,children:i}),(0,t.jsx)("footer",{className:X.footer,children:(0,t.jsx)(Z.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},869:function(e,r,n){"use strict";n.r(r);var t=n(5893),i=n(7757),s=n.n(i),a=n(2137),c=n(7294),o=n(5152),l=n(4941),d=n(2236),h=n(1664),u=n(9260),x=n(2318),m=n(1749),f=n(8463),p=n(2822),j=n(998),Z=n(6847),g=n(2302),v=n(3750),y=n(7394),k=n(8222),b=n(9613),N=n(9659),C=n(282),S=n(5477),w=n(9669),D=n.n(w),I=n(1163),P=n(530),_=n(5409),O=n(7328),A=n(5877),E=n(6808),B=n.n(E);function M(){var e=(0,P.Z)(),r=(0,I.useRouter)(),n=(0,c.useContext)(d.y),i=n.state,o=n.dispatch,w=i.userInfo,E=i.cart,M=E.cartItems,R=E.shippingAddress,T=E.paymentMethod,z=function(e){return Math.round(100*e+Number.EPSILON)/100},F=z(M.reduce((function(e,r){return e+r.price*r.quantity}),0)),L=F>200?0:15,H=z(.15*F),W=z(F+L+H);(0,c.useEffect)((function(){T||r.push("/payment"),0===M.length&&r.push("/cart")}),[]);var $=(0,O.Ds)(),q=$.closeSnackbar,G=$.enqueueSnackbar,K=(0,c.useState)(!1),U=K[0],X=K[1],Q=function(){var e=(0,a.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(),e.prev=1,X(!0),e.next=5,D().post("/api/orders",{orderItems:M,shippingAddress:R,paymentMethod:T,itemsPrice:F,shippingPrice:L,taxPrice:H,totalPrice:W},{headers:{authorization:"Bearer ".concat(w.token)}});case 5:n=e.sent,t=n.data,o({type:"CART_CLEAR"}),B().remove("cartItems"),X(!1),r.push("/order/".concat(t._id)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),X(!1),G((0,A.b)(e.t0),{variant:"error"});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return(0,t.jsxs)(l.Z,{title:"Place Order",children:[(0,t.jsx)(_.Z,{activeStep:3}),(0,t.jsx)(x.Z,{component:"h1",variant:"h1",children:"Place Order"}),(0,t.jsxs)(m.Z,{container:!0,spacing:1,children:[(0,t.jsxs)(m.Z,{item:!0,md:9,xs:12,children:[(0,t.jsx)(f.Z,{className:e.section,children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(x.Z,{component:"h2",variant:"h2",children:"Shipping Address"})}),(0,t.jsxs)(j.Z,{children:[R.fullName,", ",R.address,","," ",R.city,", ",R.postalCode,","," ",R.country]})]})}),(0,t.jsx)(f.Z,{className:e.section,children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(x.Z,{component:"h2",variant:"h2",children:"Payment Method"})}),(0,t.jsx)(j.Z,{children:T})]})}),(0,t.jsx)(f.Z,{className:e.section,children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(x.Z,{component:"h2",variant:"h2",children:"Order Items"})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(y.Z,{children:[(0,t.jsx)(k.Z,{children:"Image"}),(0,t.jsx)(k.Z,{children:"Name"}),(0,t.jsx)(k.Z,{align:"right",children:"Quantity"}),(0,t.jsx)(k.Z,{align:"right",children:"Price"})]})}),(0,t.jsx)(b.Z,{children:M.map((function(e){return(0,t.jsxs)(y.Z,{children:[(0,t.jsx)(k.Z,{children:(0,t.jsx)(h.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,t.jsx)(N.Z,{children:(0,t.jsx)(u.default,{src:e.image,alt:e.name,width:50,height:50})})})}),(0,t.jsx)(k.Z,{children:(0,t.jsx)(h.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,t.jsx)(N.Z,{children:(0,t.jsx)(x.Z,{children:e.name})})})}),(0,t.jsx)(k.Z,{align:"right",children:(0,t.jsx)(x.Z,{children:e.quantity})}),(0,t.jsx)(k.Z,{align:"right",children:(0,t.jsxs)(x.Z,{children:["$",e.price]})})]},e._id)}))})]})})})]})})]}),(0,t.jsx)(m.Z,{item:!0,md:3,xs:12,children:(0,t.jsx)(f.Z,{className:e.section,children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(x.Z,{variant:"h2",children:"Order Summary"})}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)(m.Z,{container:!0,children:[(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:"Items:"})}),(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsxs)(x.Z,{align:"right",children:["$",F]})})]})}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)(m.Z,{container:!0,children:[(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:"Tax:"})}),(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsxs)(x.Z,{align:"right",children:["$",H]})})]})}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)(m.Z,{container:!0,children:[(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:"Shipping:"})}),(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsxs)(x.Z,{align:"right",children:["$",L]})})]})}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)(m.Z,{container:!0,children:[(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:(0,t.jsx)("strong",{children:"Total:"})})}),(0,t.jsx)(m.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{align:"right",children:(0,t.jsxs)("strong",{children:["$",W]})})})]})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(C.Z,{onClick:Q,variant:"contained",color:"primary",fullWidth:!0,children:"Place Order"})}),U&&(0,t.jsx)(j.Z,{children:(0,t.jsx)(S.Z,{})})]})})})]})]})}r.default=(0,o.default)((function(){return Promise.resolve(M)}),{ssr:!1})},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),i=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=i},4631:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/placeorder",function(){return n(869)}])}},function(e){e.O(0,[774,961,453,537,627,675,798,888,179],(function(){return r=4631,e(e.s=r);var r}));var r=e.O();_N_E=r}]);