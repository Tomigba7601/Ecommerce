(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return W}});var t=n(5893),a=n(7757),s=n.n(a),o=n(2137),i=n(7294),c=n(9008),l=n(1664),d=n(7850),u=n(3457),p=n(5834),h=n(5258),f=n(8358),m=n(46),x=n(7812),j=n(9659),g=n(2318),Z=n(2764),b=n(2822),y=n(998),v=n(5517),S=n(5757),C=n(4741),E=n(9570),U=n(9009),k=n(282),_=n(5675),O=n(5639),w=n(3832),A=n(8884),N=n(7298),T=n(8995),P=n(530),D=n(2236),F=n(5877),I=n(6808),R=n.n(I),H=n(1163),B=n(7328),L=n(9669),z=n.n(L);function W(e){var r=e.title,n=e.description,a=e.children,I=(0,H.useRouter)(),L=(0,i.useContext)(D.y),W=L.state,q=L.dispatch,M=W.darkMode,Q=W.cart,G=W.userInfo,K=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:M?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),V=(0,P.Z)(),X=(0,i.useState)(!1),J=X[0],Y=X[1],$=function(){Y(!1)},ee=(0,i.useState)([]),re=ee[0],ne=ee[1],te=(0,B.Ds)().enqueueSnackbar,ae=function(){var e=(0,o.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,F.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,i.useState)(""),oe=se[0],ie=se[1];(0,i.useEffect)((function(){ae()}),[]);var ce=(0,i.useState)(null),le=ce[0],de=ce[1],ue=function(e,r){de(null),r&&I.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(u.Z,{theme:K,children:[(0,t.jsx)(p.ZP,{}),(0,t.jsx)(h.Z,{position:"static",className:V.navbar,children:(0,t.jsxs)(f.Z,{className:V.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){Y(!0)},className:V.menuButton,children:(0,t.jsx)(A.Z,{className:V.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:V.brand,children:"amazona"})})})]}),(0,t.jsx)(Z.ZP,{anchor:"left",open:J,onClose:$,children:(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(y.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:$,children:(0,t.jsx)(N.Z,{})})]})}),(0,t.jsx)(v.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(y.Z,{button:!0,component:"a",onClick:$,children:(0,t.jsx)(S.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:V.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),I.push("/search?query=".concat(oe))},className:V.searchForm,children:[(0,t.jsx)(C.Z,{name:"query",className:V.searchInput,placeholder:"Search products",onChange:function(e){ie(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:V.iconButton,"aria-label":"search",children:(0,t.jsx)(T.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Z,{checked:M,onChange:function(){q({type:M?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!M;R().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:Q.cartItems.length>0?(0,t.jsx)(U.Z,{color:"secondary",badgeContent:Q.cartItems.length,children:"Cart"}):"Cart"})})}),G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:V.navbarButton,children:G.name}),(0,t.jsxs)(_.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:ue,children:[(0,t.jsx)(O.Z,{onClick:function(e){return ue(0,"/profile")},children:"Profile"}),(0,t.jsx)(O.Z,{onClick:function(e){return ue(0,"/order-history")},children:"Order Hisotry"}),G.isAdmin&&(0,t.jsx)(O.Z,{onClick:function(e){return ue(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(O.Z,{onClick:function(){de(null),q({type:"USER_LOGOUT"}),R().remove("userInfo"),R().remove("cartItems"),R().remove("shippinhAddress"),R().remove("paymentMethod"),I.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(w.Z,{className:V.main,children:a}),(0,t.jsx)("footer",{className:V.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},655:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return D}});var t=n(5893),a=n(7757),s=n.n(a),o=n(2137),i=n(6156),c=n(9669),l=n.n(c),d=n(5152),u=n(1163),p=n(1664),h=n(7294),f=n(1749),m=n(8463),x=n(2822),j=n(998),g=n(5757),Z=n(2318),b=n(5477),y=n(7784),v=n(553),S=n(3258),C=n(282),E=n(5877),U=n(2236),k=n(4941),_=n(530),O=n(2283),w=n(7328);function A(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function N(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?A(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function T(e,r){switch(r.type){case"FETCH_REQUEST":return N(N({},e),{},{loading:!0,error:""});case"FETCH_SUCCESS":return N(N({},e),{},{loading:!1,error:""});case"FETCH_FAIL":return N(N({},e),{},{loading:!1,error:r.payload});case"UPDATE_REQUEST":return N(N({},e),{},{loadingUpdate:!0,errorUpdate:""});case"UPDATE_SUCCESS":return N(N({},e),{},{loadingUpdate:!1,errorUpdate:""});case"UPDATE_FAIL":return N(N({},e),{},{loadingUpdate:!1,errorUpdate:r.payload});case"UPLOAD_REQUEST":return N(N({},e),{},{loadingUpload:!0,errorUpload:""});case"UPLOAD_SUCCESS":return N(N({},e),{},{loadingUpload:!1,errorUpload:""});case"UPLOAD_FAIL":return N(N({},e),{},{loadingUpload:!1,errorUpload:r.payload});default:return e}}function P(e){var r=e.params.id,n=(0,h.useContext)(U.y).state,a=(0,h.useReducer)(T,{loading:!0,error:""}),i=a[0],c=i.loading,d=i.error,A=i.loadingUpdate,P=a[1],D=(0,O.cI)(),F=D.handleSubmit,I=D.control,R=D.formState.errors,H=D.setValue,B=(0,h.useState)(!1),L=B[0],z=B[1],W=(0,w.Ds)(),q=W.enqueueSnackbar,M=W.closeSnackbar,Q=(0,u.useRouter)(),G=(0,_.Z)(),K=n.userInfo;(0,h.useEffect)((function(){if(!K)return Q.push("/login");(function(){var e=(0,o.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P({type:"FETCH_REQUEST"}),e.next=4,l().get("/api/admin/users/".concat(r),{headers:{authorization:"Bearer ".concat(K.token)}});case 4:n=e.sent,t=n.data,z(t.isAdmin),P({type:"FETCH_SUCCESS"}),H("name",t.name),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),P({type:"FETCH_FAIL",payload:(0,E.b)(e.t0)});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var V=function(){var e=(0,o.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.name,M(),e.prev=2,P({type:"UPDATE_REQUEST"}),e.next=6,l().put("/api/admin/users/".concat(r),{name:t,isAdmin:L},{headers:{authorization:"Bearer ".concat(K.token)}});case 6:P({type:"UPDATE_SUCCESS"}),q("User updated successfully",{variant:"success"}),Q.push("/admin/users"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),P({type:"UPDATE_FAIL",payload:(0,E.b)(e.t0)}),q((0,E.b)(e.t0),{variant:"error"});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsx)(k.Z,{title:"Edit User ".concat(r),children:(0,t.jsxs)(f.Z,{container:!0,spacing:1,children:[(0,t.jsx)(f.Z,{item:!0,md:3,xs:12,children:(0,t.jsx)(m.Z,{className:G.section,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(p.default,{href:"/admin/dashboard",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Admin Dashboard"})})}),(0,t.jsx)(p.default,{href:"/admin/orders",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Orders"})})}),(0,t.jsx)(p.default,{href:"/admin/products",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Products"})})}),(0,t.jsx)(p.default,{href:"/admin/users",passHref:!0,children:(0,t.jsx)(j.Z,{selected:!0,button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Users"})})})]})})}),(0,t.jsx)(f.Z,{item:!0,md:9,xs:12,children:(0,t.jsx)(m.Z,{className:G.section,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsxs)(Z.Z,{component:"h1",variant:"h1",children:["Edit User ",r]})}),(0,t.jsxs)(j.Z,{children:[c&&(0,t.jsx)(b.Z,{}),d&&(0,t.jsx)(Z.Z,{className:G.error,children:d})]}),(0,t.jsx)(j.Z,{children:(0,t.jsx)("form",{onSubmit:F(V),className:G.form,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(O.Qr,{name:"name",control:I,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(y.Z,N({variant:"outlined",fullWidth:!0,id:"name",label:"Name",error:Boolean(R.name),helperText:R.name?"Name is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(v.Z,{label:"Is Admin",control:(0,t.jsx)(S.Z,{onClick:function(e){return z(e.target.checked)},checked:L,name:"isAdmin"})})}),(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(C.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Update"}),A&&(0,t.jsx)(b.Z,{})]})]})})})]})})})]})})}var D=!0;r.default=(0,d.default)((function(){return Promise.resolve(P)}),{ssr:!1})},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},9069:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/user/[id]",function(){return n(655)}])}},function(e){e.O(0,[774,961,453,537,174,784,283,280,888,179],(function(){return r=9069,e(e.s=r);var r}));var r=e.O();_N_E=r}]);