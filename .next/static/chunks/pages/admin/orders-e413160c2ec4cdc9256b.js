(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{5477:function(e,r,n){"use strict";var t=n(2122),a=n(1253),s=n(7294),i=(n(5697),n(6010)),o=n(4670),c=n(3871),l=44,d=s.forwardRef((function(e,r){var n=e.classes,o=e.className,d=e.color,h=void 0===d?"primary":d,u=e.disableShrink,f=void 0!==u&&u,p=e.size,m=void 0===p?40:p,x=e.style,j=e.thickness,Z=void 0===j?3.6:j,g=e.value,y=void 0===g?0:g,v=e.variant,b=void 0===v?"indeterminate":v,k=(0,a.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),C={},E={},D={};if("determinate"===b||"static"===b){var O=2*Math.PI*((l-Z)/2);C.strokeDasharray=O.toFixed(3),D["aria-valuenow"]=Math.round(y),C.strokeDashoffset="".concat(((100-y)/100*O).toFixed(3),"px"),E.transform="rotate(-90deg)"}return s.createElement("div",(0,t.Z)({className:(0,i.Z)(n.root,o,"inherit"!==h&&n["color".concat((0,c.Z)(h))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[b]),style:(0,t.Z)({width:m,height:m},E,x),ref:r,role:"progressbar"},D,k),s.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},s.createElement("circle",{className:(0,i.Z)(n.circle,f&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[b]),style:C,cx:l,cy:l,r:(l-Z)/2,fill:"none",strokeWidth:Z})))}));r.Z=(0,o.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return U}});var t=n(5893),a=n(7757),s=n.n(a),i=n(2137),o=n(7294),c=n(9008),l=n(1664),d=n(7850),h=n(3457),u=n(5834),f=n(5258),p=n(8358),m=n(46),x=n(7812),j=n(9659),Z=n(2318),g=n(2764),y=n(2822),v=n(998),b=n(5517),k=n(5757),C=n(4741),E=n(9570),D=n(9009),O=n(282),w=n(5675),S=n(5639),N=n(3832),_=n(8884),A=n(7298),I=n(8995),P=n(530),T=n(2236),F=n(5877),R=n(6808),H=n.n(R),B=n(1163),z=n(7328),L=n(9669),M=n.n(L);function U(e){var r=e.title,n=e.description,a=e.children,R=(0,B.useRouter)(),L=(0,o.useContext)(T.y),U=L.state,W=L.dispatch,q=U.darkMode,$=U.cart,G=U.userInfo,K=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:q?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),Q=(0,P.Z)(),X=(0,o.useState)(!1),V=X[0],J=X[1],Y=function(){J(!1)},ee=(0,o.useState)([]),re=ee[0],ne=ee[1],te=(0,z.Ds)().enqueueSnackbar,ae=function(){var e=(0,i.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,F.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),se=(0,o.useState)(""),ie=se[0],oe=se[1];(0,o.useEffect)((function(){ae()}),[]);var ce=(0,o.useState)(null),le=ce[0],de=ce[1],he=function(e,r){de(null),r&&R.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(h.Z,{theme:K,children:[(0,t.jsx)(u.ZP,{}),(0,t.jsx)(f.Z,{position:"static",className:Q.navbar,children:(0,t.jsxs)(p.Z,{className:Q.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){J(!0)},className:Q.menuButton,children:(0,t.jsx)(_.Z,{className:Q.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{className:Q.brand,children:"amazona"})})})]}),(0,t.jsx)(g.ZP,{anchor:"left",open:V,onClose:Y,children:(0,t.jsxs)(y.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(Z.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(A.Z,{})})]})}),(0,t.jsx)(b.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(v.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(k.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:Q.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),R.push("/search?query=".concat(ie))},className:Q.searchForm,children:[(0,t.jsx)(C.Z,{name:"query",className:Q.searchInput,placeholder:"Search products",onChange:function(e){oe(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:Q.iconButton,"aria-label":"search",children:(0,t.jsx)(I.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Z,{checked:q,onChange:function(){W({type:q?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!q;H().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{component:"span",children:$.cartItems.length>0?(0,t.jsx)(D.Z,{color:"secondary",badgeContent:$.cartItems.length,children:"Cart"}):"Cart"})})}),G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:Q.navbarButton,children:G.name}),(0,t.jsxs)(w.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:he,children:[(0,t.jsx)(S.Z,{onClick:function(e){return he(0,"/profile")},children:"Profile"}),(0,t.jsx)(S.Z,{onClick:function(e){return he(0,"/order-history")},children:"Order Hisotry"}),G.isAdmin&&(0,t.jsx)(S.Z,{onClick:function(e){return he(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(S.Z,{onClick:function(){de(null),W({type:"USER_LOGOUT"}),H().remove("userInfo"),H().remove("cartItems"),H().remove("shippinhAddress"),H().remove("paymentMethod"),R.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(N.Z,{className:Q.main,children:a}),(0,t.jsx)("footer",{className:Q.footer,children:(0,t.jsx)(Z.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},7248:function(e,r,n){"use strict";n.r(r);var t=n(5893),a=n(7757),s=n.n(a),i=n(2137),o=n(6156),c=n(9669),l=n.n(c),d=n(5152),h=n(1163),u=n(1664),f=n(7294),p=n(1749),m=n(8463),x=n(2822),j=n(998),Z=n(5757),g=n(2318),y=n(5477),v=n(6847),b=n(2302),k=n(3750),C=n(7394),E=n(8222),D=n(9613),O=n(282),w=n(5877),S=n(2236),N=n(4941),_=n(530);function A(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function I(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?A(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function P(e,r){switch(r.type){case"FETCH_REQUEST":return I(I({},e),{},{loading:!0,error:""});case"FETCH_SUCCESS":return I(I({},e),{},{loading:!1,orders:r.payload,error:""});case"FETCH_FAIL":return I(I({},e),{},{loading:!1,error:r.payload})}}function T(){var e=(0,f.useContext)(S.y).state,r=(0,h.useRouter)(),n=(0,_.Z)(),a=e.userInfo,o=(0,f.useReducer)(P,{loading:!0,orders:[],error:""}),c=o[0],d=c.loading,A=c.error,I=c.orders,T=o[1];return(0,f.useEffect)((function(){a||r.push("/login"),function(){var e=(0,i.Z)(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({type:"FETCH_REQUEST"}),e.next=4,l().get("/api/admin/orders",{headers:{authorization:"Bearer ".concat(a.token)}});case 4:r=e.sent,n=r.data,T({type:"FETCH_SUCCESS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),T({type:"FETCH_FAIL",payload:(0,w.b)(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]),(0,t.jsx)(N.Z,{title:"Orders",children:(0,t.jsxs)(p.Z,{container:!0,spacing:1,children:[(0,t.jsx)(p.Z,{item:!0,md:3,xs:12,children:(0,t.jsx)(m.Z,{className:n.section,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(u.default,{href:"/admin/dashboard",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(Z.Z,{primary:"Admin Dashboard"})})}),(0,t.jsx)(u.default,{href:"/admin/orders",passHref:!0,children:(0,t.jsx)(j.Z,{selected:!0,button:!0,component:"a",children:(0,t.jsx)(Z.Z,{primary:"Orders"})})}),(0,t.jsx)(u.default,{href:"/admin/products",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(Z.Z,{primary:"Products"})})}),(0,t.jsx)(u.default,{href:"/admin/users",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(Z.Z,{primary:"Users"})})})]})})}),(0,t.jsx)(p.Z,{item:!0,md:9,xs:12,children:(0,t.jsx)(m.Z,{className:n.section,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"h1",variant:"h1",children:"Orders"})}),(0,t.jsx)(j.Z,{children:d?(0,t.jsx)(y.Z,{}):A?(0,t.jsx)(g.Z,{className:n.error,children:A}):(0,t.jsx)(v.Z,{children:(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(k.Z,{children:(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(E.Z,{children:"ID"}),(0,t.jsx)(E.Z,{children:"USER"}),(0,t.jsx)(E.Z,{children:"DATE"}),(0,t.jsx)(E.Z,{children:"TOTAL"}),(0,t.jsx)(E.Z,{children:"PAID"}),(0,t.jsx)(E.Z,{children:"DELIVERED"}),(0,t.jsx)(E.Z,{children:"ACTION"})]})}),(0,t.jsx)(D.Z,{children:I.map((function(e){return(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(E.Z,{children:e._id.substring(20,24)}),(0,t.jsx)(E.Z,{children:e.user?e.user.name:"DELETED USER"}),(0,t.jsx)(E.Z,{children:e.createdAt}),(0,t.jsxs)(E.Z,{children:["$",e.totalPrice]}),(0,t.jsx)(E.Z,{children:e.isPaid?"paid at ".concat(e.paidAt):"not paid"}),(0,t.jsx)(E.Z,{children:e.isDelivered?"delivered at ".concat(e.deliveredAt):"not delivered"}),(0,t.jsx)(E.Z,{children:(0,t.jsx)(u.default,{href:"/order/".concat(e._id),passHref:!0,children:(0,t.jsx)(O.Z,{variant:"contained",children:"Details"})})})]},e._id)}))})]})})})]})})})]})})}r.default=(0,d.default)((function(){return Promise.resolve(T)}),{ssr:!1})},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},3764:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders",function(){return n(7248)}])}},function(e){e.O(0,[774,961,453,537,627,888,179],(function(){return r=3764,e(e.s=r);var r}));var r=e.O();_N_E=r}]);