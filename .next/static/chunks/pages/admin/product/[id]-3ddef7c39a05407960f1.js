(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return W}});var t=n(5893),a=n(7757),i=n.n(a),o=n(2137),s=n(7294),c=n(9008),l=n(1664),d=n(7850),u=n(3457),p=n(5834),f=n(5258),h=n(8358),m=n(46),x=n(7812),j=n(9659),g=n(2318),Z=n(2764),b=n(2822),v=n(998),y=n(5517),S=n(5757),C=n(4741),k=n(9570),E=n(9009),U=n(282),I=n(5675),_=n(5639),T=n(3832),O=n(8884),w=n(7298),P=n(8995),A=n(530),F=n(2236),N=n(5877),D=n(6808),B=n.n(D),q=n(1163),R=n(7328),L=n(9669),H=n.n(L);function W(e){var r=e.title,n=e.description,a=e.children,D=(0,q.useRouter)(),L=(0,s.useContext)(F.y),W=L.state,Q=L.dispatch,z=W.darkMode,V=W.cart,M=W.userInfo,G=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:z?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),K=(0,A.Z)(),X=(0,s.useState)(!1),J=X[0],Y=X[1],$=function(){Y(!1)},ee=(0,s.useState)([]),re=ee[0],ne=ee[1],te=(0,R.Ds)().enqueueSnackbar,ae=function(){var e=(0,o.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,N.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ie=(0,s.useState)(""),oe=ie[0],se=ie[1];(0,s.useEffect)((function(){ae()}),[]);var ce=(0,s.useState)(null),le=ce[0],de=ce[1],ue=function(e,r){de(null),r&&D.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(u.Z,{theme:G,children:[(0,t.jsx)(p.ZP,{}),(0,t.jsx)(f.Z,{position:"static",className:K.navbar,children:(0,t.jsxs)(h.Z,{className:K.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){Y(!0)},className:K.menuButton,children:(0,t.jsx)(O.Z,{className:K.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:K.brand,children:"amazona"})})})]}),(0,t.jsx)(Z.ZP,{anchor:"left",open:J,onClose:$,children:(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:$,children:(0,t.jsx)(w.Z,{})})]})}),(0,t.jsx)(y.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(v.Z,{button:!0,component:"a",onClick:$,children:(0,t.jsx)(S.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:K.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),D.push("/search?query=".concat(oe))},className:K.searchForm,children:[(0,t.jsx)(C.Z,{name:"query",className:K.searchInput,placeholder:"Search products",onChange:function(e){se(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:K.iconButton,"aria-label":"search",children:(0,t.jsx)(P.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Z,{checked:z,onChange:function(){Q({type:z?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!z;B().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:V.cartItems.length>0?(0,t.jsx)(E.Z,{color:"secondary",badgeContent:V.cartItems.length,children:"Cart"}):"Cart"})})}),M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:K.navbarButton,children:M.name}),(0,t.jsxs)(I.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:ue,children:[(0,t.jsx)(_.Z,{onClick:function(e){return ue(0,"/profile")},children:"Profile"}),(0,t.jsx)(_.Z,{onClick:function(e){return ue(0,"/order-history")},children:"Order Hisotry"}),M.isAdmin&&(0,t.jsx)(_.Z,{onClick:function(e){return ue(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(_.Z,{onClick:function(){de(null),Q({type:"USER_LOGOUT"}),B().remove("userInfo"),B().remove("cartItems"),B().remove("shippinhAddress"),B().remove("paymentMethod"),D.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(T.Z,{className:K.main,children:a}),(0,t.jsx)("footer",{className:K.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},529:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return F}});var t=n(5893),a=n(7757),i=n.n(a),o=n(2137),s=n(6156),c=n(9669),l=n.n(c),d=n(5152),u=n(1163),p=n(1664),f=n(7294),h=n(1749),m=n(8463),x=n(2822),j=n(998),g=n(5757),Z=n(2318),b=n(5477),v=n(7784),y=n(282),S=n(553),C=n(3258),k=n(5877),E=n(2236),U=n(4941),I=n(530),_=n(2283),T=n(7328);function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function w(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){(0,s.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function P(e,r){switch(r.type){case"FETCH_REQUEST":return w(w({},e),{},{loading:!0,error:""});case"FETCH_SUCCESS":return w(w({},e),{},{loading:!1,error:""});case"FETCH_FAIL":return w(w({},e),{},{loading:!1,error:r.payload});case"UPDATE_REQUEST":return w(w({},e),{},{loadingUpdate:!0,errorUpdate:""});case"UPDATE_SUCCESS":return w(w({},e),{},{loadingUpdate:!1,errorUpdate:""});case"UPDATE_FAIL":return w(w({},e),{},{loadingUpdate:!1,errorUpdate:r.payload});case"UPLOAD_REQUEST":return w(w({},e),{},{loadingUpload:!0,errorUpload:""});case"UPLOAD_SUCCESS":return w(w({},e),{},{loadingUpload:!1,errorUpload:""});case"UPLOAD_FAIL":return w(w({},e),{},{loadingUpload:!1,errorUpload:r.payload});default:return e}}function A(e){var r=e.params.id,n=(0,f.useContext)(E.y).state,a=(0,f.useReducer)(P,{loading:!0,error:""}),s=a[0],c=s.loading,d=s.error,O=s.loadingUpdate,A=s.loadingUpload,F=a[1],N=(0,_.cI)(),D=N.handleSubmit,B=N.control,q=N.formState.errors,R=N.setValue,L=(0,T.Ds)(),H=L.enqueueSnackbar,W=L.closeSnackbar,Q=(0,u.useRouter)(),z=(0,I.Z)(),V=n.userInfo;(0,f.useEffect)((function(){if(!V)return Q.push("/login");(function(){var e=(0,o.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F({type:"FETCH_REQUEST"}),e.next=4,l().get("/api/admin/products/".concat(r),{headers:{authorization:"Bearer ".concat(V.token)}});case 4:n=e.sent,t=n.data,F({type:"FETCH_SUCCESS"}),R("name",t.name),R("slug",t.slug),R("price",t.price),R("image",t.image),R("featuredImage",t.featuredImage),J(t.isFeatured),R("category",t.category),R("brand",t.brand),R("countInStock",t.countInStock),R("description",t.description),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),F({type:"FETCH_FAIL",payload:(0,k.b)(e.t0)});case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var M=function(){var e=(0,o.Z)(i().mark((function e(r){var n,t,a,o,s,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"image",t=r.target.files[0],(a=new FormData).append("file",t),e.prev=4,F({type:"UPLOAD_REQUEST"}),e.next=8,l().post("/api/admin/upload",a,{headers:{"Content-Type":"multipart/form-data",authorization:"Bearer ".concat(V.token)}});case 8:o=e.sent,s=o.data,F({type:"UPLOAD_SUCCESS"}),R(n,s.secure_url),H("File uploaded successfully",{variant:"success"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),F({type:"UPLOAD_FAIL",payload:(0,k.b)(e.t0)}),H((0,k.b)(e.t0),{variant:"error"});case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(r){return e.apply(this,arguments)}}(),G=function(){var e=(0,o.Z)(i().mark((function e(n){var t,a,o,s,c,d,u,p,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.name,a=n.slug,o=n.price,s=n.category,c=n.image,d=n.featuredImage,u=n.brand,p=n.countInStock,f=n.description,W(),e.prev=2,F({type:"UPDATE_REQUEST"}),e.next=6,l().put("/api/admin/products/".concat(r),{name:t,slug:a,price:o,category:s,image:c,isFeatured:X,featuredImage:d,brand:u,countInStock:p,description:f},{headers:{authorization:"Bearer ".concat(V.token)}});case 6:F({type:"UPDATE_SUCCESS"}),H("Product updated successfully",{variant:"success"}),Q.push("/admin/products"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),F({type:"UPDATE_FAIL",payload:(0,k.b)(e.t0)}),H((0,k.b)(e.t0),{variant:"error"});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(r){return e.apply(this,arguments)}}(),K=(0,f.useState)(!1),X=K[0],J=K[1];return(0,t.jsx)(U.Z,{title:"Edit Product ".concat(r),children:(0,t.jsxs)(h.Z,{container:!0,spacing:1,children:[(0,t.jsx)(h.Z,{item:!0,md:3,xs:12,children:(0,t.jsx)(m.Z,{className:z.section,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(p.default,{href:"/admin/dashboard",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Admin Dashboard"})})}),(0,t.jsx)(p.default,{href:"/admin/orders",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Orders"})})}),(0,t.jsx)(p.default,{href:"/admin/products",passHref:!0,children:(0,t.jsx)(j.Z,{selected:!0,button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Products"})})}),(0,t.jsx)(p.default,{href:"/admin/users",passHref:!0,children:(0,t.jsx)(j.Z,{button:!0,component:"a",children:(0,t.jsx)(g.Z,{primary:"Users"})})})]})})}),(0,t.jsx)(h.Z,{item:!0,md:9,xs:12,children:(0,t.jsx)(m.Z,{className:z.section,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsxs)(Z.Z,{component:"h1",variant:"h1",children:["Edit Product ",r]})}),(0,t.jsxs)(j.Z,{children:[c&&(0,t.jsx)(b.Z,{}),d&&(0,t.jsx)(Z.Z,{className:z.error,children:d})]}),(0,t.jsx)(j.Z,{children:(0,t.jsx)("form",{onSubmit:D(G),className:z.form,children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"name",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"name",label:"Name",error:Boolean(q.name),helperText:q.name?"Name is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"slug",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"slug",label:"Slug",error:Boolean(q.slug),helperText:q.slug?"Slug is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"price",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"price",label:"Price",error:Boolean(q.price),helperText:q.price?"Price is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"image",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"image",label:"Image",error:Boolean(q.image),helperText:q.image?"Image is required":""},r))}})}),(0,t.jsxs)(j.Z,{children:[(0,t.jsxs)(y.Z,{variant:"contained",component:"label",children:["Upload File",(0,t.jsx)("input",{type:"file",onChange:M,hidden:!0})]}),A&&(0,t.jsx)(b.Z,{})]}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(S.Z,{label:"Is Featured",control:(0,t.jsx)(C.Z,{onClick:function(e){return J(e.target.checked)},checked:X,name:"isFeatured"})})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"featuredImage",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"featuredImage",label:"Featured Image",error:Boolean(q.image),helperText:q.image?"Featured Image is required":""},r))}})}),(0,t.jsxs)(j.Z,{children:[(0,t.jsxs)(y.Z,{variant:"contained",component:"label",children:["Upload File",(0,t.jsx)("input",{type:"file",onChange:function(e){return M(e,"featuredImage")},hidden:!0})]}),A&&(0,t.jsx)(b.Z,{})]}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"category",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"category",label:"Category",error:Boolean(q.category),helperText:q.category?"Category is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"brand",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"brand",label:"Brand",error:Boolean(q.brand),helperText:q.brand?"Brand is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"countInStock",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,id:"countInStock",label:"Count in stock",error:Boolean(q.countInStock),helperText:q.countInStock?"Count in stock is required":""},r))}})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(_.Qr,{name:"description",control:B,defaultValue:"",rules:{required:!0},render:function(e){var r=e.field;return(0,t.jsx)(v.Z,w({variant:"outlined",fullWidth:!0,multiline:!0,id:"description",label:"Description",error:Boolean(q.description),helperText:q.description?"Description is required":""},r))}})}),(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(y.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Update"}),O&&(0,t.jsx)(b.Z,{})]})]})})})]})})})]})})}var F=!0;r.default=(0,d.default)((function(){return Promise.resolve(A)}),{ssr:!1})},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},2194:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/product/[id]",function(){return n(529)}])}},function(e){e.O(0,[774,961,453,537,174,784,283,280,888,179],(function(){return r=2194,e(e.s=r);var r}));var r=e.O();_N_E=r}]);