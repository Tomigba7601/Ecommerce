(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[441],{5477:function(e,r,n){"use strict";var t=n(2122),a=n(1253),i=n(7294),s=(n(5697),n(6010)),c=n(4670),o=n(3871),l=44,d=i.forwardRef((function(e,r){var n=e.classes,c=e.className,d=e.color,h=void 0===d?"primary":d,u=e.disableShrink,p=void 0!==u&&u,f=e.size,x=void 0===f?40:f,m=e.style,j=e.thickness,Z=void 0===j?3.6:j,g=e.value,v=void 0===g?0:g,y=e.variant,b=void 0===y?"indeterminate":y,k=(0,a.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),E={},S={},_={};if("determinate"===b||"static"===b){var C=2*Math.PI*((l-Z)/2);E.strokeDasharray=C.toFixed(3),_["aria-valuenow"]=Math.round(v),E.strokeDashoffset="".concat(((100-v)/100*C).toFixed(3),"px"),S.transform="rotate(-90deg)"}return i.createElement("div",(0,t.Z)({className:(0,s.Z)(n.root,c,"inherit"!==h&&n["color".concat((0,o.Z)(h))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[b]),style:(0,t.Z)({width:x,height:x},S,m),ref:r,role:"progressbar"},_,k),i.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},i.createElement("circle",{className:(0,s.Z)(n.circle,p&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[b]),style:E,cx:l,cy:l,r:(l-Z)/2,fill:"none",strokeWidth:Z})))}));r.Z=(0,c.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return M}});var t=n(5893),a=n(7757),i=n.n(a),s=n(2137),c=n(7294),o=n(9008),l=n(1664),d=n(7850),h=n(3457),u=n(5834),p=n(5258),f=n(8358),x=n(46),m=n(7812),j=n(9659),Z=n(2318),g=n(2764),v=n(2822),y=n(998),b=n(5517),k=n(5757),E=n(4741),S=n(9570),_=n(9009),C=n(282),D=n(5675),P=n(5639),w=n(3832),O=n(8884),N=n(7298),I=n(8995),A=n(530),R=n(2236),T=n(5877),F=n(6808),L=n.n(F),B=n(1163),U=n(7328),H=n(9669),z=n.n(H);function M(e){var r=e.title,n=e.description,a=e.children,F=(0,B.useRouter)(),H=(0,c.useContext)(R.y),M=H.state,W=H.dispatch,V=M.darkMode,Y=M.cart,Q=M.userInfo,$=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:V?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),q=(0,A.Z)(),G=(0,c.useState)(!1),K=G[0],X=G[1],J=function(){X(!1)},ee=(0,c.useState)([]),re=ee[0],ne=ee[1],te=(0,U.Ds)().enqueueSnackbar,ae=function(){var e=(0,s.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,T.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ie=(0,c.useState)(""),se=ie[0],ce=ie[1];(0,c.useEffect)((function(){ae()}),[]);var oe=(0,c.useState)(null),le=oe[0],de=oe[1],he=function(e,r){de(null),r&&F.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(h.Z,{theme:$,children:[(0,t.jsx)(u.ZP,{}),(0,t.jsx)(p.Z,{position:"static",className:q.navbar,children:(0,t.jsxs)(f.Z,{className:q.toolbar,children:[(0,t.jsxs)(x.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(m.Z,{edge:"start","aria-label":"open drawer",onClick:function(){X(!0)},className:q.menuButton,children:(0,t.jsx)(O.Z,{className:q.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{className:q.brand,children:"amazona"})})})]}),(0,t.jsx)(g.ZP,{anchor:"left",open:K,onClose:J,children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(y.Z,{children:(0,t.jsxs)(x.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(Z.Z,{children:"Shopping by category"}),(0,t.jsx)(m.Z,{"aria-label":"close",onClick:J,children:(0,t.jsx)(N.Z,{})})]})}),(0,t.jsx)(b.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(y.Z,{button:!0,component:"a",onClick:J,children:(0,t.jsx)(k.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:q.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F.push("/search?query=".concat(se))},className:q.searchForm,children:[(0,t.jsx)(E.Z,{name:"query",className:q.searchInput,placeholder:"Search products",onChange:function(e){ce(e.target.value)}}),(0,t.jsx)(m.Z,{type:"submit",className:q.iconButton,"aria-label":"search",children:(0,t.jsx)(I.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Z,{checked:V,onChange:function(){W({type:V?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!V;L().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{component:"span",children:Y.cartItems.length>0?(0,t.jsx)(_.Z,{color:"secondary",badgeContent:Y.cartItems.length,children:"Cart"}):"Cart"})})}),Q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:q.navbarButton,children:Q.name}),(0,t.jsxs)(D.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:he,children:[(0,t.jsx)(P.Z,{onClick:function(e){return he(0,"/profile")},children:"Profile"}),(0,t.jsx)(P.Z,{onClick:function(e){return he(0,"/order-history")},children:"Order Hisotry"}),Q.isAdmin&&(0,t.jsx)(P.Z,{onClick:function(e){return he(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(P.Z,{onClick:function(){de(null),W({type:"USER_LOGOUT"}),L().remove("userInfo"),L().remove("cartItems"),L().remove("shippinhAddress"),L().remove("paymentMethod"),F.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(Z.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(w.Z,{className:q.main,children:a}),(0,t.jsx)("footer",{className:q.footer,children:(0,t.jsx)(Z.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},5943:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return U}});var t=n(5893),a=n(7757),i=n.n(a),s=n(2137),c=n(4699),o=n(6156),l=n(7294),d=n(5152),h=n(4941),u=n(2236),p=n(1664),f=n(9260),x=n(2318),m=n(5477),j=n(1749),Z=n(8463),g=n(2822),v=n(998),y=n(9659),b=n(6847),k=n(2302),E=n(3750),S=n(7394),_=n(8222),C=n(9613),D=n(282),P=n(9669),w=n.n(P),O=n(1163),N=n(530),I=n(7328),A=n(5877),R=n(5021);function T(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function F(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function L(e,r){switch(r.type){case"FETCH_REQUEST":return F(F({},e),{},{loading:!0,error:""});case"FETCH_SUCCESS":return F(F({},e),{},{loading:!1,order:r.payload,error:""});case"FETCH_FAIL":return F(F({},e),{},{loading:!1,error:r.payload});case"PAY_REQUEST":return F(F({},e),{},{loadingPay:!0});case"PAY_SUCCESS":return F(F({},e),{},{loadingPay:!1,successPay:!0});case"PAY_FAIL":return F(F({},e),{},{loadingPay:!1,errorPay:r.payload});case"PAY_RESET":return F(F({},e),{},{loadingPay:!1,successPay:!1,errorPay:""});case"DELIVER_REQUEST":return F(F({},e),{},{loadingDeliver:!0});case"DELIVER_SUCCESS":return F(F({},e),{},{loadingDeliver:!1,successDeliver:!0});case"DELIVER_FAIL":return F(F({},e),{},{loadingDeliver:!1,errorDeliver:r.payload});case"DELIVER_RESET":return F(F({},e),{},{loadingDeliver:!1,successDeliver:!1,errorDeliver:""})}}function B(e){var r=e.params.id,n=(0,R.Up)(),a=(0,c.Z)(n,2),o=a[0].isPending,d=a[1],P=(0,N.Z)(),T=(0,O.useRouter)(),F=(0,l.useContext)(u.y).state.userInfo,B=(0,l.useReducer)(L,{loading:!0,order:{},error:""}),U=B[0],H=U.loading,z=U.error,M=U.order,W=U.successPay,V=U.loadingDeliver,Y=U.successDeliver,Q=B[1],$=M.shippingAddress,q=M.paymentMethod,G=M.orderItems,K=M.itemsPrice,X=M.taxPrice,J=M.shippingPrice,ee=M.totalPrice,re=M.isPaid,ne=M.paidAt,te=M.isDelivered,ae=M.deliveredAt;(0,l.useEffect)((function(){if(!F)return T.push("/login");var e=function(){var e=(0,s.Z)(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q({type:"FETCH_REQUEST"}),e.next=4,w().get("/api/orders/".concat(r),{headers:{authorization:"Bearer ".concat(F.token)}});case 4:n=e.sent,t=n.data,Q({type:"FETCH_SUCCESS",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Q({type:"FETCH_FAIL",payload:(0,A.b)(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();!M._id||W||Y||M._id&&M._id!==r?(e(),W&&Q({type:"PAY_RESET"}),Y&&Q({type:"DELIVER_RESET"})):function(){var e=(0,s.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w().get("/api/keys/paypal",{headers:{authorization:"Bearer ".concat(F.token)}});case 2:r=e.sent,n=r.data,d({type:"resetOptions",value:{"client-id":n,currency:"USD"}}),d({type:"setLoadingStatus",value:"pending"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[M,W,Y]);var ie=(0,I.Ds)().enqueueSnackbar;function se(){return(se=(0,s.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q({type:"DELIVER_REQUEST"}),e.next=4,w().put("/api/orders/".concat(M._id,"/deliver"),{},{headers:{authorization:"Bearer ".concat(F.token)}});case 4:r=e.sent,n=r.data,Q({type:"DELIVER_SUCCESS",payload:n}),ie("Order is delivered",{variant:"success"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Q({type:"DELIVER_FAIL",payload:(0,A.b)(e.t0)}),ie((0,A.b)(e.t0),{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return(0,t.jsxs)(h.Z,{title:"Order ".concat(r),children:[(0,t.jsxs)(x.Z,{component:"h1",variant:"h1",children:["Order ",r]}),H?(0,t.jsx)(m.Z,{}):z?(0,t.jsx)(x.Z,{className:P.error,children:z}):(0,t.jsxs)(j.Z,{container:!0,spacing:1,children:[(0,t.jsxs)(j.Z,{item:!0,md:9,xs:12,children:[(0,t.jsx)(Z.Z,{className:P.section,children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(x.Z,{component:"h2",variant:"h2",children:"Shipping Address"})}),(0,t.jsxs)(v.Z,{children:[$.fullName,", ",$.address,","," ",$.city,", ",$.postalCode,","," ",$.country,"\xa0",$.location&&(0,t.jsx)(y.Z,{variant:"button",target:"_new",href:"https://maps.google.com?q=".concat($.location.lat,",").concat($.location.lng),children:"Show On Map"})]}),(0,t.jsxs)(v.Z,{children:["Status:"," ",te?"delivered at ".concat(ae):"not delivered"]})]})}),(0,t.jsx)(Z.Z,{className:P.section,children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(x.Z,{component:"h2",variant:"h2",children:"Payment Method"})}),(0,t.jsx)(v.Z,{children:q}),(0,t.jsxs)(v.Z,{children:["Status: ",re?"paid at ".concat(ne):"not paid"]})]})}),(0,t.jsx)(Z.Z,{className:P.section,children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(x.Z,{component:"h2",variant:"h2",children:"Order Items"})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(b.Z,{children:(0,t.jsxs)(k.Z,{children:[(0,t.jsx)(E.Z,{children:(0,t.jsxs)(S.Z,{children:[(0,t.jsx)(_.Z,{children:"Image"}),(0,t.jsx)(_.Z,{children:"Name"}),(0,t.jsx)(_.Z,{align:"right",children:"Quantity"}),(0,t.jsx)(_.Z,{align:"right",children:"Price"})]})}),(0,t.jsx)(C.Z,{children:G.map((function(e){return(0,t.jsxs)(S.Z,{children:[(0,t.jsx)(_.Z,{children:(0,t.jsx)(p.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,t.jsx)(y.Z,{children:(0,t.jsx)(f.default,{src:e.image,alt:e.name,width:50,height:50})})})}),(0,t.jsx)(_.Z,{children:(0,t.jsx)(p.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,t.jsx)(y.Z,{children:(0,t.jsx)(x.Z,{children:e.name})})})}),(0,t.jsx)(_.Z,{align:"right",children:(0,t.jsx)(x.Z,{children:e.quantity})}),(0,t.jsx)(_.Z,{align:"right",children:(0,t.jsxs)(x.Z,{children:["$",e.price]})})]},e._id)}))})]})})})]})})]}),(0,t.jsx)(j.Z,{item:!0,md:3,xs:12,children:(0,t.jsx)(Z.Z,{className:P.section,children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsx)(x.Z,{variant:"h2",children:"Order Summary"})}),(0,t.jsx)(v.Z,{children:(0,t.jsxs)(j.Z,{container:!0,children:[(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:"Items:"})}),(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsxs)(x.Z,{align:"right",children:["$",K]})})]})}),(0,t.jsx)(v.Z,{children:(0,t.jsxs)(j.Z,{container:!0,children:[(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:"Tax:"})}),(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsxs)(x.Z,{align:"right",children:["$",X]})})]})}),(0,t.jsx)(v.Z,{children:(0,t.jsxs)(j.Z,{container:!0,children:[(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:"Shipping:"})}),(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsxs)(x.Z,{align:"right",children:["$",J]})})]})}),(0,t.jsx)(v.Z,{children:(0,t.jsxs)(j.Z,{container:!0,children:[(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{children:(0,t.jsx)("strong",{children:"Total:"})})}),(0,t.jsx)(j.Z,{item:!0,xs:6,children:(0,t.jsx)(x.Z,{align:"right",children:(0,t.jsxs)("strong",{children:["$",ee]})})})]})}),!re&&(0,t.jsx)(v.Z,{children:o?(0,t.jsx)(m.Z,{}):(0,t.jsx)("div",{className:P.fullWidth,children:(0,t.jsx)(R.ch,{createOrder:function(e,r){return r.order.create({purchase_units:[{amount:{value:ee}}]}).then((function(e){return e}))},onApprove:function(e,r){return r.order.capture().then(function(){var e=(0,s.Z)(i().mark((function e(r){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q({type:"PAY_REQUEST"}),e.next=4,w().put("/api/orders/".concat(M._id,"/pay"),r,{headers:{authorization:"Bearer ".concat(F.token)}});case 4:n=e.sent,t=n.data,Q({type:"PAY_SUCCESS",payload:t}),ie("Order is paid",{variant:"success"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Q({type:"PAY_FAIL",payload:(0,A.b)(e.t0)}),ie((0,A.b)(e.t0),{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(r){return e.apply(this,arguments)}}())},onError:function(e){ie((0,A.b)(e),{variant:"error"})}})})}),F.isAdmin&&M.isPaid&&!M.isDelivered&&(0,t.jsxs)(v.Z,{children:[V&&(0,t.jsx)(m.Z,{}),(0,t.jsx)(D.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){return se.apply(this,arguments)},children:"Deliver Order"})]})]})})})]})]})}var U=!0;r.default=(0,d.default)((function(){return Promise.resolve(B)}),{ssr:!1})},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},9869:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order/[id]",function(){return n(5943)}])}},function(e){e.O(0,[774,961,453,537,627,675,888,179],(function(){return r=9869,e(e.s=r);var r}));var r=e.O();_N_E=r}]);