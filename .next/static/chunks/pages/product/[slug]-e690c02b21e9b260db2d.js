(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{5477:function(e,r,t){"use strict";var n=t(2122),i=t(1253),a=t(7294),s=(t(5697),t(6010)),c=t(4670),o=t(3871),l=44,d=a.forwardRef((function(e,r){var t=e.classes,c=e.className,d=e.color,u=void 0===d?"primary":d,h=e.disableShrink,f=void 0!==h&&h,m=e.size,p=void 0===m?40:m,x=e.style,j=e.thickness,Z=void 0===j?3.6:j,v=e.value,g=void 0===v?0:v,y=e.variant,b=void 0===y?"indeterminate":y,k=(0,i.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),w={},S={},C={};if("determinate"===b||"static"===b){var N=2*Math.PI*((l-Z)/2);w.strokeDasharray=N.toFixed(3),C["aria-valuenow"]=Math.round(g),w.strokeDashoffset="".concat(((100-g)/100*N).toFixed(3),"px"),S.transform="rotate(-90deg)"}return a.createElement("div",(0,n.Z)({className:(0,s.Z)(t.root,c,"inherit"!==u&&t["color".concat((0,o.Z)(u))],{determinate:t.determinate,indeterminate:t.indeterminate,static:t.static}[b]),style:(0,n.Z)({width:p,height:p},S,x),ref:r,role:"progressbar"},C,k),a.createElement("svg",{className:t.svg,viewBox:"".concat(22," ").concat(22," ").concat(l," ").concat(l)},a.createElement("circle",{className:(0,s.Z)(t.circle,f&&t.circleDisableShrink,{determinate:t.circleDeterminate,indeterminate:t.circleIndeterminate,static:t.circleStatic}[b]),style:w,cx:l,cy:l,r:(l-Z)/2,fill:"none",strokeWidth:Z})))}));r.Z=(0,c.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(d)},4941:function(e,r,t){"use strict";t.d(r,{Z:function(){return q}});var n=t(5893),i=t(7757),a=t.n(i),s=t(2137),c=t(7294),o=t(9008),l=t(1664),d=t(7850),u=t(3457),h=t(5834),f=t(5258),m=t(8358),p=t(46),x=t(7812),j=t(9659),Z=t(2318),v=t(2764),g=t(2822),y=t(998),b=t(5517),k=t(5757),w=t(4741),S=t(9570),C=t(9009),N=t(282),O=t(5675),D=t(5639),_=t(3832),I=t(8884),P=t(7298),E=t(8995),R=t(530),A=t(2236),B=t(5877),F=t(6808),z=t.n(F),M=t(1163),T=t(7328),W=t(9669),H=t.n(W);function q(e){var r=e.title,t=e.description,i=e.children,F=(0,M.useRouter)(),W=(0,c.useContext)(A.y),q=W.state,L=W.dispatch,U=q.darkMode,$=q.cart,G=q.userInfo,K=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:U?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),X=(0,R.Z)(),J=(0,c.useState)(!1),Q=J[0],V=J[1],Y=function(){V(!1)},ee=(0,c.useState)([]),re=ee[0],te=ee[1],ne=(0,T.Ds)().enqueueSnackbar,ie=function(){var e=(0,s.Z)(a().mark((function e(){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H().get("/api/products/categories");case 3:r=e.sent,t=r.data,te(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),ne((0,B.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ae=(0,c.useState)(""),se=ae[0],ce=ae[1];(0,c.useEffect)((function(){ie()}),[]);var oe=(0,c.useState)(null),le=oe[0],de=oe[1],ue=function(e,r){de(null),r&&F.push(r)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.default,{children:[(0,n.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),t&&(0,n.jsx)("meta",{name:"description",content:t})]}),(0,n.jsxs)(u.Z,{theme:K,children:[(0,n.jsx)(h.ZP,{}),(0,n.jsx)(f.Z,{position:"static",className:X.navbar,children:(0,n.jsxs)(m.Z,{className:X.toolbar,children:[(0,n.jsxs)(p.Z,{display:"flex",alignItems:"center",children:[(0,n.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){V(!0)},className:X.menuButton,children:(0,n.jsx)(I.Z,{className:X.navbarButton})}),(0,n.jsx)(l.default,{href:"/",passHref:!0,children:(0,n.jsx)(j.Z,{children:(0,n.jsx)(Z.Z,{className:X.brand,children:"amazona"})})})]}),(0,n.jsx)(v.ZP,{anchor:"left",open:Q,onClose:Y,children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(y.Z,{children:(0,n.jsxs)(p.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(Z.Z,{children:"Shopping by category"}),(0,n.jsx)(x.Z,{"aria-label":"close",onClick:Y,children:(0,n.jsx)(P.Z,{})})]})}),(0,n.jsx)(b.Z,{light:!0}),re.map((function(e){return(0,n.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,n.jsx)(y.Z,{button:!0,component:"a",onClick:Y,children:(0,n.jsx)(k.Z,{primary:e})})},e)}))]})}),(0,n.jsx)("div",{className:X.searchSection,children:(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F.push("/search?query=".concat(se))},className:X.searchForm,children:[(0,n.jsx)(w.Z,{name:"query",className:X.searchInput,placeholder:"Search products",onChange:function(e){ce(e.target.value)}}),(0,n.jsx)(x.Z,{type:"submit",className:X.iconButton,"aria-label":"search",children:(0,n.jsx)(E.Z,{})})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(S.Z,{checked:U,onChange:function(){L({type:U?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!U;z().set("darkMode",e?"ON":"OFF")}}),(0,n.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,n.jsx)(j.Z,{children:(0,n.jsx)(Z.Z,{component:"span",children:$.cartItems.length>0?(0,n.jsx)(C.Z,{color:"secondary",badgeContent:$.cartItems.length,children:"Cart"}):"Cart"})})}),G?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:X.navbarButton,children:G.name}),(0,n.jsxs)(O.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:ue,children:[(0,n.jsx)(D.Z,{onClick:function(e){return ue(0,"/profile")},children:"Profile"}),(0,n.jsx)(D.Z,{onClick:function(e){return ue(0,"/order-history")},children:"Order Hisotry"}),G.isAdmin&&(0,n.jsx)(D.Z,{onClick:function(e){return ue(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,n.jsx)(D.Z,{onClick:function(){de(null),L({type:"USER_LOGOUT"}),z().remove("userInfo"),z().remove("cartItems"),z().remove("shippinhAddress"),z().remove("paymentMethod"),F.push("/")},children:"Logout"})]})]}):(0,n.jsx)(l.default,{href:"/login",passHref:!0,children:(0,n.jsx)(j.Z,{children:(0,n.jsx)(Z.Z,{component:"span",children:"Login"})})})]})]})}),(0,n.jsx)(_.Z,{className:X.main,children:i}),(0,n.jsx)("footer",{className:X.footer,children:(0,n.jsx)(Z.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},8060:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return I},default:function(){return P}});var n=t(5893),i=t(6156),a=t(7757),s=t.n(a),c=t(2137),o=t(7294),l=t(1664),d=t(9260),u=t(9659),h=t(2318),f=t(1749),m=t(2822),p=t(998),x=t(8463),j=t(282),Z=t(7784),v=t(5477),g=t(628),y=t(4941),b=t(530),k=t(9669),w=t.n(k),S=t(2236),C=t(5877),N=t(1163),O=t(7328);function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){(0,i.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var I=!0;function P(e){var r=(0,N.useRouter)(),t=(0,o.useContext)(S.y),i=t.state,a=t.dispatch,k=i.userInfo,D=e.product,I=(0,b.Z)(),P=(0,O.Ds)().enqueueSnackbar,E=(0,o.useState)([]),R=E[0],A=E[1],B=(0,o.useState)(0),F=B[0],z=B[1],M=(0,o.useState)(""),T=M[0],W=M[1],H=(0,o.useState)(!1),q=H[0],L=H[1],U=function(){var e=(0,c.Z)(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),L(!0),e.prev=2,e.next=5,w().post("/api/products/".concat(D._id,"/reviews"),{rating:F,comment:T},{headers:{authorization:"Bearer ".concat(k.token)}});case 5:L(!1),P("Review submitted successfully",{variant:"success"}),$(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),L(!1),P((0,C.b)(e.t0),{variant:"error"});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}(),$=function(){var e=(0,c.Z)(s().mark((function e(){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w().get("/api/products/".concat(D._id,"/reviews"));case 3:r=e.sent,t=r.data,A(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),P((0,C.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();if((0,o.useEffect)((function(){$()}),[]),!D)return(0,n.jsx)("div",{children:"Product Not Found"});var G=function(){var e=(0,c.Z)(s().mark((function e(){var t,n,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.cart.cartItems.find((function(e){return e._id===D._id})),n=t?t.quantity+1:1,e.next=4,w().get("/api/products/".concat(D._id));case 4:if(c=e.sent,!(c.data.countInStock<n)){e.next=9;break}return window.alert("Sorry. Product is out of stock"),e.abrupt("return");case 9:a({type:"CART_ADD_ITEM",payload:_(_({},D),{},{quantity:n})}),r.push("/cart");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,n.jsxs)(y.Z,{title:D.name,description:D.description,children:[(0,n.jsx)("div",{className:I.section,children:(0,n.jsx)(l.default,{href:"/",passHref:!0,children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(h.Z,{children:"back to products"})})})}),(0,n.jsxs)(f.Z,{container:!0,spacing:1,children:[(0,n.jsx)(f.Z,{item:!0,md:6,xs:12,children:(0,n.jsx)(d.default,{src:D.image,alt:D.name,width:640,height:640,layout:"responsive"})}),(0,n.jsx)(f.Z,{item:!0,md:3,xs:12,children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsx)(h.Z,{component:"h1",variant:"h1",children:D.name})}),(0,n.jsx)(p.Z,{children:(0,n.jsxs)(h.Z,{children:["Category: ",D.category]})}),(0,n.jsx)(p.Z,{children:(0,n.jsxs)(h.Z,{children:["Brand: ",D.brand]})}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(g.Z,{value:D.rating,readOnly:!0}),(0,n.jsx)(u.Z,{href:"#reviews",children:(0,n.jsxs)(h.Z,{children:["(",D.numReviews," reviews)"]})})]}),(0,n.jsx)(p.Z,{children:(0,n.jsxs)(h.Z,{children:[" Description: ",D.description]})})]})}),(0,n.jsx)(f.Z,{item:!0,md:3,xs:12,children:(0,n.jsx)(x.Z,{children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsxs)(f.Z,{container:!0,children:[(0,n.jsx)(f.Z,{item:!0,xs:6,children:(0,n.jsx)(h.Z,{children:"Price"})}),(0,n.jsx)(f.Z,{item:!0,xs:6,children:(0,n.jsxs)(h.Z,{children:["$",D.price]})})]})}),(0,n.jsx)(p.Z,{children:(0,n.jsxs)(f.Z,{container:!0,children:[(0,n.jsx)(f.Z,{item:!0,xs:6,children:(0,n.jsx)(h.Z,{children:"Status"})}),(0,n.jsx)(f.Z,{item:!0,xs:6,children:(0,n.jsx)(h.Z,{children:D.countInStock>0?"In stock":"Unavailable"})})]})}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(j.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:G,children:"Add to cart"})})]})})})]}),(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsx)(h.Z,{name:"reviews",id:"reviews",variant:"h2",children:"Customer Reviews"})}),0===R.length&&(0,n.jsx)(p.Z,{children:"No review"}),R.map((function(e){return(0,n.jsx)(p.Z,{children:(0,n.jsxs)(f.Z,{container:!0,children:[(0,n.jsxs)(f.Z,{item:!0,className:I.reviewItem,children:[(0,n.jsx)(h.Z,{children:(0,n.jsx)("strong",{children:e.name})}),(0,n.jsx)(h.Z,{children:e.createdAt.substring(0,10)})]}),(0,n.jsxs)(f.Z,{item:!0,children:[(0,n.jsx)(g.Z,{value:e.rating,readOnly:!0}),(0,n.jsx)(h.Z,{children:e.comment})]})]})},e._id)})),(0,n.jsx)(p.Z,{children:k?(0,n.jsx)("form",{onSubmit:U,className:I.reviewForm,children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(p.Z,{children:(0,n.jsx)(h.Z,{variant:"h2",children:"Leave your review"})}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(Z.Z,{multiline:!0,variant:"outlined",fullWidth:!0,name:"review",label:"Enter comment",value:T,onChange:function(e){return W(e.target.value)}})}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(g.Z,{name:"simple-controlled",value:F,onChange:function(e){return z(e.target.value)}})}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(j.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Submit"}),q&&(0,n.jsx)(v.Z,{})]})]})}):(0,n.jsxs)(h.Z,{variant:"h2",children:["Please"," ",(0,n.jsx)(u.Z,{href:"/login?redirect=/product/".concat(D.slug),children:"login"})," ","to write a review"]})})]})]})}},5877:function(e,r,t){"use strict";t.d(r,{b:function(){return n}});t(7757),t(2137),t(6785),t(4155);var n=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,t){"use strict";var n=t(6156),i=(0,t(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,n.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=i},3524:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return t(8060)}])}},function(e){e.O(0,[961,453,537,174,784,675,207,774,888,179],(function(){return r=3524,e(e.s=r);var r}));var r=e.O();_N_E=r}]);