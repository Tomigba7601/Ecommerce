(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{4941:function(e,n,r){"use strict";r.d(n,{Z:function(){return W}});var t=r(5893),i=r(7757),a=r.n(i),s=r(2137),c=r(7294),o=r(9008),l=r(1664),d=r(7850),u=r(3457),h=r(5834),f=r(5258),p=r(8358),x=r(46),m=r(7812),j=r(9659),g=r(2318),Z=r(2764),b=r(2822),y=r(998),v=r(5517),k=r(5757),C=r(4741),w=r(9570),O=r(9009),N=r(282),_=r(5675),S=r(5639),I=r(3832),A=r(8884),E=r(7298),P=r(8995),R=r(530),D=r(2236),T=r(5877),B=r(6808),H=r.n(B),M=r(1163),F=r(7328),q=r(9669),z=r.n(q);function W(e){var n=e.title,r=e.description,i=e.children,B=(0,M.useRouter)(),q=(0,c.useContext)(D.y),W=q.state,L=q.dispatch,G=W.darkMode,K=W.cart,U=W.userInfo,X=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:G?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),$=(0,R.Z)(),Q=(0,c.useState)(!1),V=Q[0],J=Q[1],Y=function(){J(!1)},ee=(0,c.useState)([]),ne=ee[0],re=ee[1],te=(0,F.Ds)().enqueueSnackbar,ie=function(){var e=(0,s.Z)(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z().get("/api/products/categories");case 3:n=e.sent,r=n.data,re(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,T.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ae=(0,c.useState)(""),se=ae[0],ce=ae[1];(0,c.useEffect)((function(){ie()}),[]);var oe=(0,c.useState)(null),le=oe[0],de=oe[1],ue=function(e,n){de(null),n&&B.push(n)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(o.default,{children:[(0,t.jsx)("title",{children:n?"".concat(n," - Next Amazona"):"Next Amazona"}),r&&(0,t.jsx)("meta",{name:"description",content:r})]}),(0,t.jsxs)(u.Z,{theme:X,children:[(0,t.jsx)(h.ZP,{}),(0,t.jsx)(f.Z,{position:"static",className:$.navbar,children:(0,t.jsxs)(p.Z,{className:$.toolbar,children:[(0,t.jsxs)(x.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(m.Z,{edge:"start","aria-label":"open drawer",onClick:function(){J(!0)},className:$.menuButton,children:(0,t.jsx)(A.Z,{className:$.navbarButton})}),(0,t.jsx)(l.default,{href:"/",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{className:$.brand,children:"amazona"})})})]}),(0,t.jsx)(Z.ZP,{anchor:"left",open:V,onClose:Y,children:(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(y.Z,{children:(0,t.jsxs)(x.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(g.Z,{children:"Shopping by category"}),(0,t.jsx)(m.Z,{"aria-label":"close",onClick:Y,children:(0,t.jsx)(E.Z,{})})]})}),(0,t.jsx)(v.Z,{light:!0}),ne.map((function(e){return(0,t.jsx)(l.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(y.Z,{button:!0,component:"a",onClick:Y,children:(0,t.jsx)(k.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:$.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B.push("/search?query=".concat(se))},className:$.searchForm,children:[(0,t.jsx)(C.Z,{name:"query",className:$.searchInput,placeholder:"Search products",onChange:function(e){ce(e.target.value)}}),(0,t.jsx)(m.Z,{type:"submit",className:$.iconButton,"aria-label":"search",children:(0,t.jsx)(P.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.Z,{checked:G,onChange:function(){L({type:G?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!G;H().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(l.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:K.cartItems.length>0?(0,t.jsx)(O.Z,{color:"secondary",badgeContent:K.cartItems.length,children:"Cart"}):"Cart"})})}),U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:$.navbarButton,children:U.name}),(0,t.jsxs)(_.Z,{id:"simple-menu",anchorEl:le,keepMounted:!0,open:Boolean(le),onClose:ue,children:[(0,t.jsx)(S.Z,{onClick:function(e){return ue(0,"/profile")},children:"Profile"}),(0,t.jsx)(S.Z,{onClick:function(e){return ue(0,"/order-history")},children:"Order Hisotry"}),U.isAdmin&&(0,t.jsx)(S.Z,{onClick:function(e){return ue(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(S.Z,{onClick:function(){de(null),L({type:"USER_LOGOUT"}),H().remove("userInfo"),H().remove("cartItems"),H().remove("shippinhAddress"),H().remove("paymentMethod"),B.push("/")},children:"Logout"})]})]}):(0,t.jsx)(l.default,{href:"/login",passHref:!0,children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(g.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(I.Z,{className:$.main,children:i}),(0,t.jsx)("footer",{className:$.footer,children:(0,t.jsx)(g.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},7720:function(e,n,r){"use strict";r.r(n);var t=r(7329),i=r(5893),a=r(7757),s=r.n(a),c=r(6156),o=r(2137),l=r(7294),d=r(5152),u=r(4941),h=r(2236),f=r(1664),p=r(9260),x=r(2318),m=r(9659),j=r(1749),g=r(6847),Z=r(2302),b=r(3750),y=r(7394),v=r(8222),k=r(9613),C=r(6209),w=r(5639),O=r(282),N=r(8463),_=r(2822),S=r(998),I=r(9669),A=r.n(I),E=r(1163);function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function R(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function D(){var e=(0,E.useRouter)(),n=(0,l.useContext)(h.y),r=n.state,a=n.dispatch,c=r.cart.cartItems,d=function(){var e=(0,o.Z)(s().mark((function e(n,r){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A().get("/api/products/".concat(n._id));case 2:if(t=e.sent,!(t.data.countInStock<r)){e.next=7;break}return window.alert("Sorry. Product is out of stock"),e.abrupt("return");case 7:a({type:"CART_ADD_ITEM",payload:R(R({},n),{},{quantity:r})});case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,i.jsxs)(u.Z,{title:"Shopping Cart",children:[(0,i.jsx)(x.Z,{component:"h1",variant:"h1",children:"Shopping Cart"}),0===c.length?(0,i.jsxs)("div",{children:["Cart is empty."," ",(0,i.jsx)(f.default,{href:"/",passHref:!0,children:(0,i.jsx)(m.Z,{children:"Go shopping"})})]}):(0,i.jsxs)(j.Z,{container:!0,spacing:1,children:[(0,i.jsx)(j.Z,{item:!0,md:9,xs:12,children:(0,i.jsx)(g.Z,{children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(b.Z,{children:(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(v.Z,{children:"Image"}),(0,i.jsx)(v.Z,{children:"Name"}),(0,i.jsx)(v.Z,{align:"right",children:"Quantity"}),(0,i.jsx)(v.Z,{align:"right",children:"Price"}),(0,i.jsx)(v.Z,{align:"right",children:"Action"})]})}),(0,i.jsx)(k.Z,{children:c.map((function(e){return(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(v.Z,{children:(0,i.jsx)(f.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,i.jsx)(m.Z,{children:(0,i.jsx)(p.default,{src:e.image,alt:e.name,width:50,height:50})})})}),(0,i.jsx)(v.Z,{children:(0,i.jsx)(f.default,{href:"/product/".concat(e.slug),passHref:!0,children:(0,i.jsx)(m.Z,{children:(0,i.jsx)(x.Z,{children:e.name})})})}),(0,i.jsx)(v.Z,{align:"right",children:(0,i.jsx)(C.Z,{value:e.quantity,onChange:function(n){return d(e,n.target.value)},children:(0,t.Z)(Array(e.countInStock).keys()).map((function(e){return(0,i.jsx)(w.Z,{value:e+1,children:e+1},e+1)}))})}),(0,i.jsxs)(v.Z,{align:"right",children:["$",e.price]}),(0,i.jsx)(v.Z,{align:"right",children:(0,i.jsx)(O.Z,{variant:"contained",color:"secondary",onClick:function(){return function(e){a({type:"CART_REMOVE_ITEM",payload:e})}(e)},children:"x"})})]},e._id)}))})]})})}),(0,i.jsx)(j.Z,{item:!0,md:3,xs:12,children:(0,i.jsx)(N.Z,{children:(0,i.jsxs)(_.Z,{children:[(0,i.jsx)(S.Z,{children:(0,i.jsxs)(x.Z,{variant:"h2",children:["Subtotal (",c.reduce((function(e,n){return e+n.quantity}),0)," ","items) : $",c.reduce((function(e,n){return e+n.quantity*n.price}),0)]})}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(O.Z,{onClick:function(){e.push("/shipping")},variant:"contained",color:"primary",fullWidth:!0,children:"Check Out"})})]})})})]})]})}n.default=(0,d.default)((function(){return Promise.resolve(D)}),{ssr:!1})},5877:function(e,n,r){"use strict";r.d(n,{b:function(){return t}});r(7757),r(2137),r(6785),r(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,n,r){"use strict";var t=r(6156),i=(0,r(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));n.Z=i},4701:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return r(7720)}])}},function(e){e.O(0,[774,961,453,537,174,627,675,888,179],(function(){return n=4701,e(e.s=n);var n}));var n=e.O();_N_E=n}]);