(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{5409:function(e,r,n){"use strict";n.d(r,{Z:function(){return l}});var t=n(5893),a=n(7661),o=n(1594),i=n(7257),s=(n(7294),n(530));function l(e){var r=e.activeStep,n=void 0===r?0:r,l=(0,s.Z)();return(0,t.jsx)(a.Z,{className:l.transparentBackgroud,activeStep:n,alternativeLabel:!0,children:["Login","Shipping Address","Payment Method","Place Order"].map((function(e){return(0,t.jsx)(o.Z,{children:(0,t.jsx)(i.Z,{children:e})},e)}))})}},4941:function(e,r,n){"use strict";n.d(r,{Z:function(){return H}});var t=n(5893),a=n(7757),o=n.n(a),i=n(2137),s=n(7294),l=n(9008),c=n(1664),d=n(7850),u=n(3457),h=n(5834),f=n(5258),p=n(8358),m=n(46),x=n(7812),g=n(9659),j=n(2318),y=n(2764),Z=n(2822),b=n(998),v=n(5517),C=n(5757),N=n(4741),S=n(9570),k=n(9009),O=n(282),w=n(5675),A=n(5639),P=n(3832),_=n(8884),B=n(7298),E=n(8995),I=n(530),L=n(2236),D=n(5877),q=n(6808),R=n.n(q),T=n(1163),W=n(7328),F=n(9669),V=n.n(F);function H(e){var r=e.title,n=e.description,a=e.children,q=(0,T.useRouter)(),F=(0,s.useContext)(L.y),H=F.state,z=F.dispatch,M=H.darkMode,Q=H.cart,G=H.userInfo,K=(0,d.A)({typography:{h1:{fontSize:"1.6rem",fontWeight:400,margin:"1rem 0"},h2:{fontSize:"1.4rem",fontWeight:400,margin:"1rem 0"}},palette:{type:M?"dark":"light",primary:{main:"#f0c000"},secondary:{main:"#208080"}}}),U=(0,I.Z)(),X=(0,s.useState)(!1),J=X[0],Y=X[1],$=function(){Y(!1)},ee=(0,s.useState)([]),re=ee[0],ne=ee[1],te=(0,W.Ds)().enqueueSnackbar,ae=function(){var e=(0,i.Z)(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V().get("/api/products/categories");case 3:r=e.sent,n=r.data,ne(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),te((0,D.b)(e.t0),{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),oe=(0,s.useState)(""),ie=oe[0],se=oe[1];(0,s.useEffect)((function(){ae()}),[]);var le=(0,s.useState)(null),ce=le[0],de=le[1],ue=function(e,r){de(null),r&&q.push(r)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.default,{children:[(0,t.jsx)("title",{children:r?"".concat(r," - Next Amazona"):"Next Amazona"}),n&&(0,t.jsx)("meta",{name:"description",content:n})]}),(0,t.jsxs)(u.Z,{theme:K,children:[(0,t.jsx)(h.ZP,{}),(0,t.jsx)(f.Z,{position:"static",className:U.navbar,children:(0,t.jsxs)(p.Z,{className:U.toolbar,children:[(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",children:[(0,t.jsx)(x.Z,{edge:"start","aria-label":"open drawer",onClick:function(){Y(!0)},className:U.menuButton,children:(0,t.jsx)(_.Z,{className:U.navbarButton})}),(0,t.jsx)(c.default,{href:"/",passHref:!0,children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(j.Z,{className:U.brand,children:"amazona"})})})]}),(0,t.jsx)(y.ZP,{anchor:"left",open:J,onClose:$,children:(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(b.Z,{children:(0,t.jsxs)(m.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(j.Z,{children:"Shopping by category"}),(0,t.jsx)(x.Z,{"aria-label":"close",onClick:$,children:(0,t.jsx)(B.Z,{})})]})}),(0,t.jsx)(v.Z,{light:!0}),re.map((function(e){return(0,t.jsx)(c.default,{href:"/search?category=".concat(e),passHref:!0,children:(0,t.jsx)(b.Z,{button:!0,component:"a",onClick:$,children:(0,t.jsx)(C.Z,{primary:e})})},e)}))]})}),(0,t.jsx)("div",{className:U.searchSection,children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),q.push("/search?query=".concat(ie))},className:U.searchForm,children:[(0,t.jsx)(N.Z,{name:"query",className:U.searchInput,placeholder:"Search products",onChange:function(e){se(e.target.value)}}),(0,t.jsx)(x.Z,{type:"submit",className:U.iconButton,"aria-label":"search",children:(0,t.jsx)(E.Z,{})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Z,{checked:M,onChange:function(){z({type:M?"DARK_MODE_OFF":"DARK_MODE_ON"});var e=!M;R().set("darkMode",e?"ON":"OFF")}}),(0,t.jsx)(c.default,{href:"/cart",passHref:!0,children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(j.Z,{component:"span",children:Q.cartItems.length>0?(0,t.jsx)(k.Z,{color:"secondary",badgeContent:Q.cartItems.length,children:"Cart"}):"Cart"})})}),G?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Z,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){de(e.currentTarget)},className:U.navbarButton,children:G.name}),(0,t.jsxs)(w.Z,{id:"simple-menu",anchorEl:ce,keepMounted:!0,open:Boolean(ce),onClose:ue,children:[(0,t.jsx)(A.Z,{onClick:function(e){return ue(0,"/profile")},children:"Profile"}),(0,t.jsx)(A.Z,{onClick:function(e){return ue(0,"/order-history")},children:"Order Hisotry"}),G.isAdmin&&(0,t.jsx)(A.Z,{onClick:function(e){return ue(0,"/admin/dashboard")},children:"Admin Dashboard"}),(0,t.jsx)(A.Z,{onClick:function(){de(null),z({type:"USER_LOGOUT"}),R().remove("userInfo"),R().remove("cartItems"),R().remove("shippinhAddress"),R().remove("paymentMethod"),q.push("/")},children:"Logout"})]})]}):(0,t.jsx)(c.default,{href:"/login",passHref:!0,children:(0,t.jsx)(g.Z,{children:(0,t.jsx)(j.Z,{component:"span",children:"Login"})})})]})]})}),(0,t.jsx)(P.Z,{className:U.main,children:a}),(0,t.jsx)("footer",{className:U.footer,children:(0,t.jsx)(j.Z,{children:"All rights reserved. Next Amazona."})})]})]})}},6464:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return b}});var t=n(5893),a=n(6156),o=n(2318),i=n(2822),s=n(998),l=n(7784),c=n(282),d=n(1163),u=n(7294),h=n(4941),f=n(2236),p=n(530),m=n(6808),x=n.n(m),g=n(2283),j=n(5409);function y(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function Z(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?y(Object(n),!0).forEach((function(r){(0,a.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function b(){var e=(0,g.cI)(),r=e.handleSubmit,n=e.control,a=e.formState.errors,m=e.setValue,y=e.getValues,b=(0,d.useRouter)(),v=(0,u.useContext)(f.y),C=v.state,N=v.dispatch,S=C.userInfo,k=C.cart.shippingAddress,O=k.location;(0,u.useEffect)((function(){S||b.push("/login?redirect=/shipping"),m("fullName",k.fullName),m("address",k.address),m("city",k.city),m("postalCode",k.postalCode),m("country",k.country)}),[]);var w=(0,p.Z)();return(0,t.jsxs)(h.Z,{title:"Shipping Address",children:[(0,t.jsx)(j.Z,{activeStep:1}),(0,t.jsxs)("form",{onSubmit:r((function(e){var r=e.fullName,n=e.address,t=e.city,a=e.postalCode,o=e.country;N({type:"SAVE_SHIPPING_ADDRESS",payload:{fullName:r,address:n,city:t,postalCode:a,country:o,location:O}}),x().set("shippingAddress",{fullName:r,address:n,city:t,postalCode:a,country:o,location:O}),b.push("/payment")})),className:w.form,children:[(0,t.jsx)(o.Z,{component:"h1",variant:"h1",children:"Shipping Address"}),(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(s.Z,{children:(0,t.jsx)(g.Qr,{name:"fullName",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,t.jsx)(l.Z,Z({variant:"outlined",fullWidth:!0,id:"fullName",label:"Full Name",error:Boolean(a.fullName),helperText:a.fullName?"minLength"===a.fullName.type?"Full Name length is more than 1":"Full Name is required":""},r))}})}),(0,t.jsx)(s.Z,{children:(0,t.jsx)(g.Qr,{name:"address",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,t.jsx)(l.Z,Z({variant:"outlined",fullWidth:!0,id:"address",label:"Address",error:Boolean(a.address),helperText:a.address?"minLength"===a.address.type?"Address length is more than 1":"Address is required":""},r))}})}),(0,t.jsx)(s.Z,{children:(0,t.jsx)(g.Qr,{name:"city",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,t.jsx)(l.Z,Z({variant:"outlined",fullWidth:!0,id:"city",label:"City",error:Boolean(a.city),helperText:a.city?"minLength"===a.city.type?"City length is more than 1":"City is required":""},r))}})}),(0,t.jsx)(s.Z,{children:(0,t.jsx)(g.Qr,{name:"postalCode",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,t.jsx)(l.Z,Z({variant:"outlined",fullWidth:!0,id:"postalCode",label:"Postal Code",error:Boolean(a.postalCode),helperText:a.postalCode?"minLength"===a.postalCode.type?"Postal Code length is more than 1":"Postal Code is required":""},r))}})}),(0,t.jsx)(s.Z,{children:(0,t.jsx)(g.Qr,{name:"country",control:n,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,t.jsx)(l.Z,Z({variant:"outlined",fullWidth:!0,id:"country",label:"Country",error:Boolean(a.country),helperText:a.country?"minLength"===a.country.type?"Country length is more than 1":"Country is required":""},r))}})}),(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(c.Z,{variant:"contained",type:"button",onClick:function(){var e=y("fullName"),r=y("address"),n=y("city"),t=y("postalCode"),a=y("country");N({type:"SAVE_SHIPPING_ADDRESS",payload:{fullName:e,address:r,city:n,postalCode:t,country:a}}),x().set("shippingAddress",{fullName:e,address:r,city:n,postalCode:t,country:a,location:O}),b.push("/map")},children:"Choose on map"}),(0,t.jsx)(o.Z,{children:O.lat&&"".concat(O.lat,", ").concat(O.lat)})]}),(0,t.jsx)(s.Z,{children:(0,t.jsx)(c.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Continue"})})]})]})]})}},5877:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});n(7757),n(2137),n(6785),n(4155);var t=function(e){return e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}},530:function(e,r,n){"use strict";var t=n(6156),a=(0,n(1120).Z)((function(e){return{navbar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},brand:{fontWeight:"bold",fontSize:"1.5rem"},grow:{flexGrow:1},main:{minHeight:"80vh"},footer:{marginTop:10,textAlign:"center"},section:{marginTop:10,marginBottom:10},form:{width:"100%",maxWidth:800,margin:"0 auto"},navbarButton:{color:"#ffffff",textTransform:"initial"},transparentBackgroud:{backgroundColor:"transparent"},error:{color:"#f04040"},fullWidth:{width:"100%"},reviewForm:{maxWidth:800,width:"100%"},reviewItem:{marginRight:"1rem",borderRight:"1px #808080 solid",paddingRight:"1rem"},toolbar:{justifyContent:"space-between"},menuButton:{padding:0},mt1:{marginTop:"1rem"},searchSection:(0,t.Z)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),searchForm:{border:"1px solid #ffffff",backgroundColor:"#ffffff",borderRadius:5},searchInput:{paddingLeft:5,color:"#000000","& ::placeholder":{color:"#606060"}},iconButton:{backgroundColor:"#f8c040",padding:5,borderRadius:"0 5px 5px 0","& span":{color:"#000000"}},sort:{marginRight:5},fullContainer:{height:"100vh"},mapInputBox:{position:"absolute",display:"flex",left:0,right:0,margin:"10px auto",width:300,height:40,"& input":{width:250}}}}));r.Z=a},5665:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shipping",function(){return n(6464)}])}},function(e){e.O(0,[961,453,537,174,784,283,798,774,888,179],(function(){return r=5665,e(e.s=r);var r}));var r=e.O();_N_E=r}]);